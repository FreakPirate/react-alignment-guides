"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.checkValueProximities = exports.getAllGuidesForGivenAxisExceptActiveBox = exports.proximityListener = exports.calculateGuidePositions = void 0;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var calculateGuidePositions = function calculateGuidePositions(dimensions, axis) {
  if (axis === 'x') {
    var start = dimensions.left;
    var middle = dimensions.left + parseInt(dimensions.width / 2, 10);
    var end = dimensions.left + dimensions.width;
    return [start, middle, end];
  } else {
    var _start = dimensions.top;

    var _middle = dimensions.top + parseInt(dimensions.height / 2, 10);

    var _end = dimensions.top + dimensions.height;

    return [_start, _middle, _end];
  }
};

exports.calculateGuidePositions = calculateGuidePositions;

var proximityListener = function proximityListener(active, allGuides) {
  var xAxisGuidesForActiveBox = allGuides[active].x;
  var yAxisGuidesForActiveBox = allGuides[active].y;
  var xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');
  var yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');
  var xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);
  var yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);
  var allMatchedGuides = {};

  if (xAxisMatchedGuides.proximity) {
    allMatchedGuides.x = _objectSpread({}, xAxisMatchedGuides, {
      activeBoxGuides: xAxisGuidesForActiveBox
    });
  }

  if (yAxisMatchedGuides.proximity) {
    allMatchedGuides.y = _objectSpread({}, yAxisMatchedGuides, {
      activeBoxGuides: yAxisGuidesForActiveBox
    });
  }

  return allMatchedGuides;
};

exports.proximityListener = proximityListener;

var getAllGuidesForGivenAxisExceptActiveBox = function getAllGuidesForGivenAxisExceptActiveBox(allGuides, guidesForActiveBoxAlongGivenAxis, axis) {
  var result = Object.keys(allGuides).map(function (box) {
    var currentBoxGuidesAlongGivenAxis = allGuides[box][axis];

    if (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {
      return currentBoxGuidesAlongGivenAxis;
    }
  });
  return result.filter(function (guides) {
    return guides !== undefined;
  });
};

exports.getAllGuidesForGivenAxisExceptActiveBox = getAllGuidesForGivenAxisExceptActiveBox;

var checkValueProximities = function checkValueProximities(activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) {
  var proximity = null;
  var intersection = null;
  var matchedArray = [];
  var snapThreshold = 5;

  for (var index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {
    var index2 = 0;
    var index3 = 0;

    while (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {
      var diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);

      if (diff <= snapThreshold) {
        proximity = {
          value: diff,
          activeBoxIndex: index2,
          matchedBoxIndex: index3
        };
        matchedArray = allOtherGuidesInOneAxis[index];
        intersection = allOtherGuidesInOneAxis[index][index3];
      }

      if (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {
        index2 += 1;
      } else {
        index3 += 1;
      }
    }
  }

  return {
    matchedArray: matchedArray,
    proximity: proximity,
    intersection: intersection
  };
};

exports.checkValueProximities = checkValueProximities;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9oZWxwZXJzLmpzIl0sIm5hbWVzIjpbImNhbGN1bGF0ZUd1aWRlUG9zaXRpb25zIiwiZGltZW5zaW9ucyIsImF4aXMiLCJzdGFydCIsImxlZnQiLCJtaWRkbGUiLCJwYXJzZUludCIsIndpZHRoIiwiZW5kIiwidG9wIiwiaGVpZ2h0IiwicHJveGltaXR5TGlzdGVuZXIiLCJhY3RpdmUiLCJhbGxHdWlkZXMiLCJ4QXhpc0d1aWRlc0ZvckFjdGl2ZUJveCIsIngiLCJ5QXhpc0d1aWRlc0ZvckFjdGl2ZUJveCIsInkiLCJ4QXhpc0FsbEd1aWRlcyIsImdldEFsbEd1aWRlc0ZvckdpdmVuQXhpc0V4Y2VwdEFjdGl2ZUJveCIsInlBeGlzQWxsR3VpZGVzIiwieEF4aXNNYXRjaGVkR3VpZGVzIiwiY2hlY2tWYWx1ZVByb3hpbWl0aWVzIiwieUF4aXNNYXRjaGVkR3VpZGVzIiwiYWxsTWF0Y2hlZEd1aWRlcyIsInByb3hpbWl0eSIsImFjdGl2ZUJveEd1aWRlcyIsImd1aWRlc0ZvckFjdGl2ZUJveEFsb25nR2l2ZW5BeGlzIiwicmVzdWx0IiwiT2JqZWN0Iiwia2V5cyIsIm1hcCIsImJveCIsImN1cnJlbnRCb3hHdWlkZXNBbG9uZ0dpdmVuQXhpcyIsImZpbHRlciIsImd1aWRlcyIsInVuZGVmaW5lZCIsImFjdGl2ZUJveEd1aWRlc0luT25lQXhpcyIsImFsbE90aGVyR3VpZGVzSW5PbmVBeGlzIiwiaW50ZXJzZWN0aW9uIiwibWF0Y2hlZEFycmF5Iiwic25hcFRocmVzaG9sZCIsImluZGV4IiwibGVuZ3RoIiwiaW5kZXgyIiwiaW5kZXgzIiwiZGlmZiIsIk1hdGgiLCJhYnMiLCJ2YWx1ZSIsImFjdGl2ZUJveEluZGV4IiwibWF0Y2hlZEJveEluZGV4Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQU8sSUFBTUEsdUJBQXVCLEdBQUcsU0FBMUJBLHVCQUEwQixDQUFDQyxVQUFELEVBQWFDLElBQWIsRUFBc0I7QUFDNUQsTUFBSUEs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VjtBQUNBO0FBQ0Q7QUFDRDs7QUFFRCxTQUFPO0FBQUVMLElBQUFBLFlBQVksRUFBWkEsWUFBRjtBQUFnQmYsSUFBQUEsU0FBUyxFQUFUQSxTQUFoQjtBQUEyQmMsSUFBQUEsWUFBWSxFQUFaQTtBQUEzQixHQUFQO0FBQ0EsQ0ExQk0iLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgY2FsY3VsYXRlR3VpZGVQb3NpdGlvbnMgPSAoZGltZW5zaW9ucywgYXhpcykgPT4ge1xuXHRpZiAoYXhpcyA9PT0gJ3gnKSB7XG5cdFx0Y29uc3Qgc3RhcnQgPSBkaW1lbnNpb25zLmxlZnQ7XG5cdFx0Y29uc3QgbWlkZGxlID0gZGltZW5zaW9ucy5sZWZ0ICsgcGFyc2VJbnQoZGltZW5zaW9ucy53aWR0aCAvIDIsIDEwKTtcblx0XHRjb25zdCBlbmQgPSBkaW1lbnNpb25zLmxlZnQgKyBkaW1lbnNpb25zLndpZHRoO1xuXG5cdFx0cmV0dXJuIFsgc3RhcnQsIG1pZGRsZSwgZW5kIF07XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3Qgc3RhcnQgPSBkaW1lbnNpb25zLnRvcDtcblx0XHRjb25zdCBtaWRkbGUgPSBkaW1lbnNpb25zLnRvcCArIHBhcnNlSW50KGRpbWVuc2lvbnMuaGVpZ2h0IC8gMiwgMTApO1xuXHRcdGNvbnN0IGVuZCA9IGRpbWVuc2lvbnMudG9wICsgZGltZW5zaW9ucy5oZWlnaHQ7XG5cblx0XHRyZXR1cm4gWyBzdGFydCwgbWlkZGxlLCBlbmQgXTtcblx0fVxufTtcblxuZXhwb3J0IGNvbnN0IHByb3hpbWl0eUxpc3RlbmVyID0gKGFjdGl2ZSwgYWxsR3VpZGVzKSA9PiB7XG5cdGNvbnN0IHhBeGlzR3VpZGVzRm9yQWN0aXZlQm94ID0gYWxsR3VpZGVzW2FjdGl2ZV0ueDtcblx0Y29uc3QgeUF4aXNHdWlkZXNGb3JBY3RpdmVCb3ggPSBhbGxHdWlkZXNbYWN0aXZlXS55O1xuXG5cdGNvbnN0IHhBeGlzQWxsR3VpZGVzID0gZ2V0QWxsR3VpZGVzRm9yR2l2ZW5BeGlzRXhjZXB0QWN0aXZlQm94KGFsbEd1aWRlcywgeEF4aXNHdWlkZXNGb3JBY3RpdmVCb3gsICd4Jyk7XG5cdGNvbnN0IHlBeGlzQWxsR3VpZGVzID0gZ2V0QWxsR3VpZGVzRm9yR2l2ZW5BeGlzRXhjZXB0QWN0aXZlQm94KGFsbEd1aWRlcywgeUF4aXNHdWlkZXNGb3JBY3RpdmVCb3gsICd5Jyk7XG5cdGNvbnN0IHhBeGlzTWF0Y2hlZEd1aWRlcyA9IGNoZWNrVmFsdWVQcm94aW1pdGllcyh4QXhpc0d1aWRlc0ZvckFjdGl2ZUJveCwgeEF4aXNBbGxHdWlkZXMpO1xuXHRjb25zdCB5QXhpc01hdGNoZWRHdWlkZXMgPSBjaGVja1ZhbHVlUHJveGltaXRpZXMoeUF4aXNHdWlkZXNGb3JBY3RpdmVCb3gsIHlBeGlzQWxsR3VpZGVzKTtcblxuXHRjb25zdCBhbGxNYXRjaGVkR3VpZGVzID0ge307XG5cblx0aWYgKHhBeGlzTWF0Y2hlZEd1aWRlcy5wcm94aW1pdHkpIHtcblx0XHRhbGxNYXRjaGVkR3VpZGVzLnggPSB7XG5cdFx0XHQuLi54QXhpc01hdGNoZWRHdWlkZXMsXG5cdFx0XHRhY3RpdmVCb3hHdWlkZXM6IHhBeGlzR3VpZGVzRm9yQWN0aXZlQm94XG5cdFx0fTtcblx0fVxuXG5cdGlmICh5QXhpc01hdGNoZWRHdWlkZXMucHJveGltaXR5KSB7XG5cdFx0YWxsTWF0Y2hlZEd1aWRlcy55ID0ge1xuXHRcdFx0Li4ueUF4aXNNYXRjaGVkR3VpZGVzLFxuXHRcdFx0YWN0aXZlQm94R3VpZGVzOiB5QXhpc0d1aWRlc0ZvckFjdGl2ZUJveCxcblx0XHR9O1xuXHR9XG5cblx0cmV0dXJuIGFsbE1hdGNoZWRHdWlkZXM7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWxsR3VpZGVzRm9yR2l2ZW5BeGlzRXhjZXB0QWN0aXZlQm94ID0gKGFsbEd1aWRlcywgZ3VpZGVzRm9yQWN0aXZlQm94QWxvbmdHaXZlbkF4aXMsIGF4aXMpID0+IHtcblx0Y29uc3QgcmVzdWx0ID0gT2JqZWN0LmtleXMoYWxsR3VpZGVzKS5tYXAoYm94ID0+IHtcblx0XHRjb25zdCBjdXJyZW50Qm94R3VpZGVzQWxvbmdHaXZlbkF4aXMgPSBhbGxHdWlkZXNbYm94XVtheGlzXTtcblx0XHRpZiAoY3VycmVudEJveEd1aWRlc0Fsb25nR2l2ZW5BeGlzICE9PSBndWlkZXNGb3JBY3RpdmVCb3hBbG9uZ0dpdmVuQXhpcykge1xuXHRcdFx0cmV0dXJuIGN1cnJlbnRCb3hHdWlkZXNBbG9uZ0dpdmVuQXhpcztcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiByZXN1bHQuZmlsdGVyKGd1aWRlcyA9PiBndWlkZXMgIT09IHVuZGVmaW5lZCk7XG59O1xuXG5leHBvcnQgY29uc3QgY2hlY2tWYWx1ZVByb3hpbWl0aWVzID0gKGFjdGl2ZUJveEd1aWRlc0luT25lQXhpcywgYWxsT3RoZXJHdWlkZXNJbk9uZUF4aXMpID0+IHtcblx0bGV0IHByb3hpbWl0eSA9IG51bGw7XG5cdGxldCBpbnRlcnNlY3Rpb24gPSBudWxsO1xuXHRsZXQgbWF0Y2hlZEFycmF5ID0gW107XG5cdGNvbnN0IHNuYXBUaHJlc2hvbGQgPSA1O1xuXHRmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYWxsT3RoZXJHdWlkZXNJbk9uZUF4aXMubGVuZ3RoOyBpbmRleCArPSAxKSB7XG5cdFx0bGV0IGluZGV4MiA9IDA7XG5cdFx0bGV0IGluZGV4MyA9IDA7XG5cblx0XHR3aGlsZSAoaW5kZXgyIDwgYWN0aXZlQm94R3VpZGVzSW5PbmVBeGlzLmxlbmd0aCAmJiBpbmRleDMgPCBhbGxPdGhlckd1aWRlc0luT25lQXhpc1tpbmRleF0ubGVuZ3RoKSB7XG5cdFx0XHRjb25zdCBkaWZmID0gTWF0aC5hYnMoYWN0aXZlQm94R3VpZGVzSW5PbmVBeGlzW2luZGV4Ml0gLSBhbGxPdGhlckd1aWRlc0luT25lQXhpc1tpbmRleF1baW5kZXgzXSk7XG5cdFx0XHRpZiAoZGlmZiA8PSBzbmFwVGhyZXNob2xkKSB7XG5cdFx0XHRcdHByb3hpbWl0eSA9IHsgdmFsdWU6IGRpZmYsIGFjdGl2ZUJveEluZGV4OiBpbmRleDIsIG1hdGNoZWRCb3hJbmRleDogaW5kZXgzIH07XG5cdFx0XHRcdG1hdGNoZWRBcnJheSA9IGFsbE90aGVyR3VpZGVzSW5PbmVBeGlzW2luZGV4XTtcblx0XHRcdFx0aW50ZXJzZWN0aW9uID0gYWxsT3RoZXJHdWlkZXNJbk9uZUF4aXNbaW5kZXhdW2luZGV4M107XG5cdFx0XHR9XG5cblx0XHRcdGlmIChhY3RpdmVCb3hHdWlkZXNJbk9uZUF4aXNbaW5kZXgyXSA8IGFsbE90aGVyR3VpZGVzSW5PbmVBeGlzW2luZGV4XVtpbmRleDNdKSB7XG5cdFx0XHRcdGluZGV4MiArPSAxO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aW5kZXgzICs9IDE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgbWF0Y2hlZEFycmF5LCBwcm94aW1pdHksIGludGVyc2VjdGlvbiB9O1xufTsiXX0=