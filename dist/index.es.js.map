{"version":3,"file":"index.es.js","sources":["../src/utils/helpers.js","../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const findBiggestBox = (boxes) => {\n\treturn Object.keys(boxes).reduce((prev, current) => {\n\t\tif (boxes[current].width > boxes[prev].width) {\n\t\t\treturn current;\n\t\t} else {\n\t\t\treturn prev\n\t\t}\n\t});\n};\n\nexport const calculateBoundariesForDrag = (left, top, width, height, bounds, scale) => {\n\tlet boundingBox = { ...bounds };\n\tif (scale && scale.width && scale.height) {\n\t\tboundingBox.width = scale.width;\n\t\tboundingBox.height = scale.height;\n\t}\n\tif (left >= 0 && left <= boundingBox.width - width && top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop\n\t\t};\n\t} else if (left >= 0 && left <= boundingBox.width - width) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t} else if (top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t}\n};\n\nexport const calculateBoundariesForResize = (left, top, width, height, bounds, scale) => {\n\tlet boundingBox = { ...bounds };\n\tif (scale && scale.width && scale.height) {\n\t\tboundingBox.width = scale.width;\n\t\tboundingBox.height = scale.height;\n\t}\n\tlet widthDifference = 0;\n\tlet heightDifference = 0;\n\tif (left >= 0 && left + width <= boundingBox.width && top >= 0 && top + height <= boundingBox.height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\t} else if (left < 0 && top < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height : boundingBox.height - top\n\t\t};\n\t} else if (top < 0) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width : boundingBox.width - left,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left >= 0 && left + width <= boundingBox.width) {\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth,\n\t\t\theight: height - heightDifference\n\t\t};\n\t} else if (top >= 0 && top + height <= boundingBox.height) {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop,\n\t\t\twidth: width - widthDifference,\n\t\t\theight\n\t\t};\n\t} else {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth: width - widthDifference,\n\t\t\theight: height - heightDifference\n\t\t};\n\t}\n};","// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down'\n};\n\n// Positions for resize handles\nexport const RESIZE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { calculateBoundariesForDrag, calculateBoundariesForResize } from './utils/helpers';\nimport { RESIZE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\n\nclass Box extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.box = React.createRef();\n\t\tthis.coordinates = React.createRef();\n\t\tthis.height = React.createRef();\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t\tthis.getCoordinatesWrapperWidth = this.getCoordinatesWrapperWidth.bind(this);\n\t}\n\n\tonDragStart(e) {\n\t\te.stopPropagation();\n\t\tconst { scale } = this.props;\n\t\tconst target = this.box.current;\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tconst startingPosition = target.getBoundingClientRect().toJSON();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tlet xFactor = 1;\n\t\tlet yFactor = 1;\n\n\t\tif (scale) {\n\t\t\txFactor = scale.width / boundingBoxPosition.width;\n\t\t\tyFactor = scale.height / boundingBoxPosition.height;\n\t\t}\n\t\tlet data = {\n\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\twidth: startingPosition.width,\n\t\t\theight: startingPosition.height,\n\t\t\tnode: target\n\t\t};\n\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\n\t\tconst deltaX = Math.abs(target.offsetLeft - e.clientX);\n\t\tconst deltaY = Math.abs(target.offsetTop - e.clientY);\n\n\t\tconst onDrag = (e) => {\n\t\t\tif (this.props.dragging) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst boxWidth = this.props.position.width;\n\t\t\t\tconst boxHeight = this.props.position.height;\n\t\t\t\tconst left = (e.clientX - deltaX) * xFactor;\n\t\t\t\tconst top = (e.clientY - deltaY) * yFactor;\n\n\t\t\t\tconst currentPosition = calculateBoundariesForDrag(left, top, boxWidth, boxHeight, boundingBoxDimensions, scale);\n\t\t\t\tdata = {\n\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\tnode: this.box.current\n\t\t\t\t};\n\n\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t}\n\t\t};\n\n\t\tconst onDragEnd = (e) => {\n\t\t\tif (this.props.dragging) {\n\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onDrag);\n\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t}\n\n\tshortcutHandler(e) {\n\t\tif (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left + 1,\n\t\t\t\tx: position.x + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left + 10,\n\t\t\t\tx: position.x + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left - 1,\n\t\t\t\tx: position.x - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left - 10,\n\t\t\t\tx: position.x - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top - 1,\n\t\t\t\ty: position.y - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top - 10,\n\t\t\t\ty: position.y - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top + 1,\n\t\t\t\ty: position.y + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top + 10,\n\t\t\t\ty: position.y + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\te.stopPropagation();\n\t\tconst { scale } = this.props;\n\t\tconst { target } = e;\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tconst startingDimensions = this.box.current.getBoundingClientRect().toJSON();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tlet xFactor = 1;\n\t\tlet yFactor = 1;\n\n\t\tif (scale) {\n\t\t\txFactor = scale.width / boundingBoxPosition.width;\n\t\t\tyFactor = scale.height / boundingBoxPosition.height;\n\t\t}\n\t\tlet data = {\n\t\t\twidth: startingDimensions.width,\n\t\t\theight: startingDimensions.height,\n\t\t\tx: startingDimensions.left - boundingBoxPosition.x,\n\t\t\ty: startingDimensions.top - boundingBoxPosition.y,\n\t\t\tleft: startingDimensions.left - boundingBoxPosition.x,\n\t\t\ttop: startingDimensions.top - boundingBoxPosition.y,\n\t\t\tnode: this.box.current\n\t\t};\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\n\t\tconst onResize = (e) => {\n\t\t\tif (this.props.resizing) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tif (target.id === 'br') {\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: Math.round((e.clientX - startingDimensions.left) * xFactor),\n\t\t\t\t\t\theight: Math.round((e.clientY - startingDimensions.top) * yFactor)\n\t\t\t\t\t};\n\t\t\t\t\tconst left = Math.round((startingDimensions.left - boundingBoxPosition.x) * xFactor);\n\t\t\t\t\tconst top = Math.round((startingDimensions.top - boundingBoxPosition.y) * yFactor);\n\t\t\t\t\tconst currentPosition = calculateBoundariesForResize(left, top, currentDimensions.width, currentDimensions.height, boundingBoxPosition, scale);\n\n\t\t\t\t\tdata = {\n\t\t\t\t\t\twidth: currentPosition.width,\n\t\t\t\t\t\theight: currentPosition.height,\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t} else if (target.id === 'bl') {\n\t\t\t\t\tconst deltaX = startingDimensions.left - e.clientX;\n\t\t\t\t\tconst deltaY = startingDimensions.top + startingDimensions.height - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: Math.round((startingDimensions.width + deltaX) * xFactor),\n\t\t\t\t\t\theight: Math.round((startingDimensions.height - deltaY) * yFactor)\n\t\t\t\t\t};\n\n\t\t\t\t\tconst calculatedPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top,\n\t\t\t\t\t\tleft: startingDimensions.left - deltaX\n\t\t\t\t\t};\n\t\t\t\t\tconst left = Math.round((calculatedPosition.left - boundingBoxPosition.x) * xFactor);\n\t\t\t\t\tconst top = Math.round((calculatedPosition.top - boundingBoxPosition.y) * yFactor);\n\t\t\t\t\tconst currentPosition = calculateBoundariesForResize(left, top, currentDimensions.width, currentDimensions.height, boundingBoxPosition, scale);\n\n\t\t\t\t\tdata = {\n\t\t\t\t\t\twidth: currentPosition.width,\n\t\t\t\t\t\theight: currentPosition.height,\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t} else if (target.id === 'tr') {\n\t\t\t\t\tconst deltaX = e.clientX - startingDimensions.left;\n\t\t\t\t\tconst deltaY = startingDimensions.top - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: Math.round(deltaX * xFactor),\n\t\t\t\t\t\theight: Math.round((startingDimensions.height + deltaY) * yFactor)\n\t\t\t\t\t};\n\n\t\t\t\t\tconst calculatedPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top - deltaY,\n\t\t\t\t\t\tleft: startingDimensions.left\n\t\t\t\t\t};\n\t\t\t\t\tconst left = Math.round((calculatedPosition.left - boundingBoxPosition.x) * xFactor);\n\t\t\t\t\tconst top = Math.round((calculatedPosition.top - boundingBoxPosition.y) * yFactor);\n\t\t\t\t\tconst currentPosition = calculateBoundariesForResize(left, top, currentDimensions.width, currentDimensions.height, boundingBoxPosition, scale);\n\n\t\t\t\t\tdata = {\n\t\t\t\t\t\twidth: currentPosition.width,\n\t\t\t\t\t\theight: currentPosition.height,\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t} else if (target.id === 'tl') {\n\t\t\t\t\tconst deltaX = startingDimensions.left - e.clientX;\n\t\t\t\t\tconst deltaY = startingDimensions.top - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: Math.round((startingDimensions.width + deltaX) * xFactor),\n\t\t\t\t\t\theight: Math.round((startingDimensions.height + deltaY) * yFactor)\n\t\t\t\t\t};\n\n\t\t\t\t\tconst calculatedPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top - deltaY,\n\t\t\t\t\t\tleft: startingDimensions.left - deltaX\n\t\t\t\t\t};\n\t\t\t\t\tconst left = Math.round((calculatedPosition.left - boundingBoxPosition.x) * xFactor);\n\t\t\t\t\tconst top = Math.round((calculatedPosition.top - boundingBoxPosition.y) * yFactor);\n\t\t\t\t\tconst currentPosition = calculateBoundariesForResize(left, top, currentDimensions.width, currentDimensions.height, boundingBoxPosition, scale);\n\n\t\t\t\t\tdata = {\n\t\t\t\t\t\twidth: currentPosition.width,\n\t\t\t\t\t\theight: currentPosition.height,\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = (e) => {\n\t\t\tif (this.props.resizing) {\n\t\t\t\tdocument.removeEventListener('mousemove', onResize);\n\t\t\t\tdocument.removeEventListener('mouseup', onResizeEnd);\n\n\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onResize);\n\t\tdocument.addEventListener('mouseup', onResizeEnd);\n\t}\n\n\tgetCoordinatesWrapperWidth() {\n\t\tif (this.props.isSelected && this.coordinates && this.coordinates.current) {\n\t\t\treturn this.coordinates.current.offsetWidth;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { biggestBox, boxStyle, id, isSelected, position, scale } = this.props;\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect();\n\t\tlet xFactor = 1;\n\t\tlet yFactor = 1;\n\n\t\tif (scale) {\n\t\t\txFactor = scale.width / boundingBoxDimensions.width;\n\t\t\tyFactor = scale.height / boundingBoxDimensions.height;\n\t\t}\n\n\t\tlet boxClassNames = isSelected ? `${styles.box} ${styles.selected}` : styles.box;\n\t\tboxClassNames = biggestBox === id ? `${boxClassNames} ${styles.biggest}` : boxClassNames;\n\t\tconst boxStyles = {\n\t\t\t...boxStyle,\n\t\t\twidth: `${position.width / xFactor}px`,\n\t\t\theight: `${position.height / yFactor}px`,\n\t\t\ttop: `${position.top / yFactor}px`,\n\t\t\tleft: `${position.left / xFactor}px`\n\t\t};\n\n\t\treturn <div\n\t\t\tclassName={boxClassNames}\n\t\t\tid={id}\n\t\t\tonMouseUp={this.props.selectBox}\n\t\t\tonMouseDown={this.onDragStart}\n\t\t\tonKeyDown={this.shortcutHandler}\n\t\t\tref={this.box}\n\t\t\tstyle={boxStyles}\n\t\t\ttabIndex=\"0\"\n\t\t>\n\t\t\t{\n\t\t\t\tisSelected ?\n\t\t\t\t\t<span\n\t\t\t\t\t\tref={this.coordinates}\n\t\t\t\t\t\tclassName={styles.coordinates}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`(${position.left}, ${position.top})`}\n\t\t\t\t\t</span> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t\t{\n\t\t\t\tisSelected ?\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={`${styles.dimensions} ${styles.width}`}\n\t\t\t\t\t\tstyle={{ width: `${position.width / xFactor}px` }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{Math.round(position.width)}\n\t\t\t\t\t</span> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t\t{\n\t\t\t\tisSelected ?\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={`${styles.dimensions} ${styles.height}`}\n\t\t\t\t\t\tstyle={{ height: `${position.height / yFactor}px`, left: `${(position.width / xFactor) + 10}px` }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{Math.round(position.height)}\n\t\t\t\t\t</span> :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t\t{\n\t\t\t\tisSelected ?\n\t\t\t\t\tRESIZE_HANDLES.map(handle => {\n\t\t\t\t\t\tconst className = `${styles.resizeHandle} ${styles[`resize-${handle}`]}`;\n\t\t\t\t\t\treturn <div key={handle} className={className} onMouseDown={this.onResizeStart} id={handle} />\n\t\t\t\t\t}) :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t</div>;\n\t}\n}\n\nBox.propTypes = {\n\tbiggestBox: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tscale: PropTypes.object\n};\n\nexport default Box;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport { calculateGuidePositions, findBiggestBox, proximityListener } from './utils/helpers';\nimport styles from './styles.scss';\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '',\n\t\t\tboundingBox: null,\n\t\t\tbiggestBox: '',\n\t\t\tboxes: {},\n\t\t\tdragging: false,\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tmatch: {},\n\t\t\tresizing: false\n\t\t};\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.dragStartHandler = this.dragStartHandler.bind(this);\n\t\tthis.dragHandler = this.dragHandler.bind(this);\n\t\tthis.dragEndHandler = this.dragEndHandler.bind(this);\n\t\tthis.resizeStartHandler = this.resizeStartHandler.bind(this);\n\t\tthis.resizeHandler = this.resizeHandler.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.keyUpHandler = this.keyUpHandler.bind(this);\n\t}\n\n\t// TODO: Remove duplicated code in componentDidMount() and componentDidUpdate() methods\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tbiggestBox: findBiggestBox(boxes)\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState, nextContext) {\n\t\tconst { active } = this.state;\n\t\t// Set the dimensions of the bounding box and the draggable boxes\n\t\t// when the component receives new boxes and/or style props.\n\t\t// This is to allow dynamically updating the component by changing the number of boxes,\n\t\t// updating existing boxes by external methods or updating the size of the bounding box\n\t\tif (nextProps.boxes !== this.props.boxes || nextProps.style !== this.props.style) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tnextProps.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tbiggestBox: findBiggestBox(boxes)\n\t\t\t});\n\t\t}\n\n\t\tif (active && nextProps.boxes[active] !== this.props.boxes[active]) {\n\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[active]: Object.assign({}, this.state.boxes[active], {\n\t\t\t\t\tx: nextProps.boxes[active].x,\n\t\t\t\t\ty: nextProps.boxes[active].y,\n\t\t\t\t\tleft: nextProps.boxes[active].left,\n\t\t\t\t\ttop: nextProps.boxes[active].top,\n\t\t\t\t\twidth: nextProps.boxes[active].width,\n\t\t\t\t\theight: nextProps.boxes[active].height\n\t\t\t\t})\n\t\t\t});\n\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t[active]: Object.assign({}, this.state.guides[active], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[active], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[active], 'y')\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tselectBox(e) {\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tif (e.target.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tconst data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target,\n\t\t\t\tmetadata: this.state.boxes[e.target.id].metadata\n\t\t\t};\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.id\n\t\t\t});\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t} else if (e.target.parentNode.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tconst data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target.parentNode,\n\t\t\t\tmetadata: this.state.boxes[e.target.parentNode.id].metadata\n\t\t\t};\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.parentNode.id\n\t\t\t});\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (e.target.id.indexOf('box') === -1 && e.target.parentNode.id.indexOf('box') === -1) {\n\t\t\tthis.setState({\n\t\t\t\tactive: ''\n\t\t\t});\n\t\t\tthis.props.onUnselect && this.props.onUnselect(e);\n\t\t}\n\t}\n\n\tdragStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tdragging: true\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onDragStart && this.props.onDragStart(e, newData);\n\t}\n\n\tdragHandler(e, data) {\n\t\tif (this.state.dragging) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onDrag && this.props.onDrag(e, newData);\n\t\t}\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\tfor (let axis in match) {\n\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\tif (axis === 'x') {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t})\n\t\t\t});\n\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tmatch\n\t\t\t});\n\t\t});\n\t}\n\n\tdragEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t});\n\t\tthis.props.onDragEnd && this.props.onDragEnd(e, newData);\n\t}\n\n\tresizeStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tresizing: true\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, newData);\n\t}\n\n\tresizeHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onResize && this.props.onResize(e, newData);\n\t\t}\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t});\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, newData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\tkeyUpHandler(e, data) {\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onKeyUp && this.props.onKeyUp(e, newData);\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides,\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { active, boxes, guides } = this.state;\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = Object.keys(boxes).map((box, index) => {\n\t\t\tconst position = boxes[box];\n\t\t\tconst id = `box${index}`;\n\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tbiggestBox={this.state.biggestBox}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdragging={this.state.dragging}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tisSelected={active === id}\n\t\t\t\tkey={id}\n\t\t\t\tonDragStart={this.dragStartHandler}\n\t\t\t\tonDrag={this.dragHandler}\n\t\t\t\tonDragEnd={this.dragEndHandler}\n\t\t\t\tonKeyUp={this.keyUpHandler}\n\t\t\t\tonResizeStart={this.resizeStartHandler}\n\t\t\t\tonResize={this.resizeHandler}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tresizing={this.state.resizing}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tconst xAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\tconst xAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\tconst yAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\tconst yAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\treturn <div ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className}`} style={this.props.style}>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\nAlignmentGuides.propTypes = {\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tonUnselect: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tscale: PropTypes.object,\n\tstyle: PropTypes.object\n};\n\nexport default AlignmentGuides;","'use strict';\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["calculateGuidePositions","dimensions","axis","start","left","middle","parseInt","width","end","top","height","proximityListener","active","allGuides","xAxisGuidesForActiveBox","x","yAxisGuidesForActiveBox","y","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","map","box","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","Math","abs","value","activeBoxIndex","matchedBoxIndex","findBiggestBox","boxes","reduce","prev","current","calculateBoundariesForDrag","bounds","scale","boundingBox","calculateBoundariesForResize","widthDifference","heightDifference","RESIZE_HANDLES","Box","props","React","createRef","coordinates","onDragStart","bind","shortcutHandler","onResizeStart","getCoordinatesWrapperWidth","e","stopPropagation","target","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","xFactor","yFactor","data","node","deltaX","offsetLeft","clientX","deltaY","offsetTop","clientY","onDrag","dragging","stopImmediatePropagation","boundingBoxDimensions","boxWidth","position","boxHeight","currentPosition","onDragEnd","document","removeEventListener","addEventListener","shiftKey","ctrlKey","key","assign","onKeyUp","startingDimensions","onResize","resizing","id","currentDimensions","round","calculatedPosition","onResizeEnd","isSelected","offsetWidth","biggestBox","boxStyle","boxClassNames","styles","selected","biggest","boxStyles","selectBox","handle","className","resizeHandle","PureComponent","propTypes","PropTypes","string","drag","bool","func","keybindings","onRotateStart","onRotate","onRotateEnd","object","isRequired","resize","rotate","AlignmentGuides","state","guidesActive","match","unSelectBox","dragStartHandler","dragHandler","dragEndHandler","resizeStartHandler","resizeHandler","resizeEndHandler","keyUpHandler","forEach","setState","nextProps","nextState","nextContext","style","indexOf","boxDimensions","metadata","onSelect","parentNode","onUnselect","newData","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","draggableBoxes","xAxisGuides","guideClassNames","guide","xAxis","xAxisGuidesForCurrentBox","concat","yAxisGuides","yAxis","yAxisGuidesForCurrentBox","Component","array"],"mappings":"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"}