{"version":3,"file":"index.es.js","sources":["../src/utils/helpers.js","../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const calculateBoundariesForDrag = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tif (left >= 0 && left <= boundingBox.width - width && top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop\n\t\t};\n\t} else if (left >= 0 && left <= boundingBox.width - width) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t} else if (top >= 0 && top <= boundingBox.height - height) {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop\n\t\t};\n\t} else {\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : (boundingBox.width - width),\n\t\t\ttop: top < 0 ? 0 : (boundingBox.height - height)\n\t\t};\n\t}\n};\n\n// Calculate boundaries for boxes given an output resolution\nexport const calculateBoundariesForResize = (left, top, width, height, bounds) => {\n\tconst boundingBox = { ...bounds };\n\tlet widthDifference = 0;\n\tlet heightDifference = 0;\n\tif (left >= 0 && left + width <= boundingBox.width && top >= 0 && top + height <= boundingBox.height) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop,\n\t\t\twidth,\n\t\t\theight\n\t\t};\n\t} else if (left < 0 && top < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left < 0) {\n\t\treturn {\n\t\t\tleft: 0,\n\t\t\ttop,\n\t\t\twidth: width + left <= boundingBox.width ? width + left : boundingBox.width,\n\t\t\theight: height + top <= boundingBox.height ? height : boundingBox.height - top\n\t\t};\n\t} else if (top < 0) {\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: 0,\n\t\t\twidth: width + left <= boundingBox.width ? width : boundingBox.width - left,\n\t\t\theight: height + top <= boundingBox.height ? height + top : boundingBox.height\n\t\t};\n\t} else if (left >= 0 && left + width <= boundingBox.width) {\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth,\n\t\t\theight: height - heightDifference\n\t\t};\n\t} else if (top >= 0 && top + height <= boundingBox.height) {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop,\n\t\t\twidth: width - widthDifference,\n\t\t\theight\n\t\t};\n\t} else {\n\t\twidthDifference = (left + width) - boundingBox.width;\n\t\theightDifference = (top + height) - boundingBox.height;\n\t\treturn {\n\t\t\tleft: left < 0 ? 0 : left,\n\t\t\ttop: top < 0 ? 0 : top,\n\t\t\twidth: width - widthDifference,\n\t\t\theight: height - heightDifference\n\t\t};\n\t}\n};\n\nexport const getOffsetCoordinates = (node) => {\n\treturn {\n\t\tx: node.offsetLeft,\n\t\ty: node.offsetTop,\n\t\ttop: node.offsetTop,\n\t\tleft: node.offsetLeft,\n\t\twidth: node.offsetWidth,\n\t\theight: node.offsetHeight\n\t};\n};\n\nexport const getLength = (x, y) => Math.sqrt(x * x + y * y);\n\nexport const topLeftToCenter = ({ left, top, width, height, rotateAngle }) => ({\n\tcx: left + width / 2,\n\tcy: top + height / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nexport const centerToTopLeft = ({ cx, cy, width, height, rotateAngle }) => ({\n\ttop: cy - height / 2,\n\tleft: cx - width / 2,\n\twidth,\n\theight,\n\trotateAngle\n});\n\nconst setWidthAndDeltaW = (width, deltaW, minWidth) => {\n\tconst expectedWidth = width + deltaW\n\tif (expectedWidth > minWidth) {\n\t\twidth = expectedWidth\n\t} else {\n\t\tdeltaW = minWidth - width\n\t\twidth = minWidth\n\t}\n\treturn { width, deltaW }\n}\n\nconst setHeightAndDeltaH = (height, deltaH, minHeight) => {\n\tconst expectedHeight = height + deltaH\n\tif (expectedHeight > minHeight) {\n\t\theight = expectedHeight\n\t} else {\n\t\tdeltaH = minHeight - height\n\t\theight = minHeight\n\t}\n\treturn { height, deltaH }\n}\n\nexport const getNewStyle = (type, rect, deltaW, deltaH, minWidth, minHeight) => {\n\tlet { width, height, cx, cy, rotateAngle } = rect;\n\tconst widthFlag = width < 0 ? -1 : 1;\n\tconst heightFlag = height < 0 ? -1 : 1;\n\twidth = Math.abs(width)\n\theight = Math.abs(height)\n\tswitch (type) {\n\t\tcase 'tr': {\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'br': {\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx += deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy += deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'bl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) + deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) - deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t\tcase 'tl': {\n\t\t\tdeltaW = -deltaW\n\t\t\tdeltaH = -deltaH\n\t\t\tconst widthAndDeltaW = setWidthAndDeltaW(width, deltaW, minWidth)\n\t\t\twidth = widthAndDeltaW.width\n\t\t\tdeltaW = widthAndDeltaW.deltaW\n\t\t\tconst heightAndDeltaH = setHeightAndDeltaH(height, deltaH, minHeight)\n\t\t\theight = heightAndDeltaH.height\n\t\t\tdeltaH = heightAndDeltaH.deltaH\n\t\t\tcx -= deltaW / 2 * cos(rotateAngle) - deltaH / 2 * sin(rotateAngle)\n\t\t\tcy -= deltaW / 2 * sin(rotateAngle) + deltaH / 2 * cos(rotateAngle)\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn {\n\t\tposition: {\n\t\t\tcx,\n\t\t\tcy\n\t\t},\n\t\tsize: {\n\t\t\twidth: width * widthFlag,\n\t\t\theight: height * heightFlag\n\t\t}\n\t}\n}\n\n// Rotate helpers\nexport const getAngle = ({ x: x1, y: y1 }, { x: x2, y: y2 }) => {\n\tconst dot = x1 * x2 + y1 * y2;\n\tconst det = x1 * y2 - y1 * x2;\n\tconst angle = Math.atan2(det, dot) / Math.PI * 180;\n\treturn (angle + 360) % 360;\n};\n\nexport const getNewCoordinates = (rect) => {\n\tconst { x, y, width, height, rotateAngle, node } = rect;\n\tconst cx = x + (width / 2);\n\tconst cy = y + (height / 2);\n\n\tconst tempX = x - cx;\n\tconst tempY = y - cy;\n\tconst cosine = cos(rotateAngle);\n\tconst sine = sin(rotateAngle);\n\n\tconst rotatedX = cx + (tempX * cosine - tempY * sine);\n\tconst rotatedY = cy + (tempX * sine + tempY * cosine);\n\n\treturn { x: rotatedX, y: rotatedY, top: rotatedX, left: rotatedY, width, height, rotateAngle, node };\n};\n\nexport const degToRadian = (deg) => deg * Math.PI / 180;\nconst cos = (deg) => Math.cos(degToRadian(deg));\nconst sin = (deg) => Math.sin(degToRadian(deg));","// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down'\n};\n\n// Positions for resize handles\nexport const RESIZE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n\tcalculateBoundariesForDrag,\n\tcalculateBoundariesForResize,\n\tdegToRadian,\n\tgetAngle,\n\ttopLeftToCenter,\n\tgetLength,\n\tgetNewCoordinates,\n\tgetNewStyle,\n\tgetOffsetCoordinates, centerToTopLeft,\n} from './utils/helpers'\nimport { RESIZE_HANDLES, ROTATE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\n\nclass Box extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.box = React.createRef();\n\t\tthis.coordinates = React.createRef();\n\t\tthis.height = React.createRef();\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t\tthis.onRotateStart = this.onRotateStart.bind(this);\n\t\tthis.getCoordinatesWrapperWidth = this.getCoordinatesWrapperWidth.bind(this);\n\t}\n\n\tselectBox(e) {\n\t\tif (!this.props.isSelected) {\n\t\t\tthis.props.selectBox(e);\n\t\t}\n\t}\n\n\tonDragStart(e) {\n\t\tif ((this.props.position.drag || this.props.position.drag === undefined) && e.target.id.indexOf('box') !== -1) { // Allow drag only if drag property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tconst startingPosition = position.rotateAngle === 0 ? target.getBoundingClientRect().toJSON() : getOffsetCoordinates(target);\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\n\t\t\tlet data = {\n\t\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\t\twidth: startingPosition.width,\n\t\t\t\theight: startingPosition.height,\n\t\t\t\tnode: target\n\t\t\t};\n\t\t\tif (position.rotateAngle !== 0) {\n\t\t\t\tdata = {\n\t\t\t\t\tx: startingPosition.x,\n\t\t\t\t\ty: startingPosition.y,\n\t\t\t\t\ttop: startingPosition.y,\n\t\t\t\t\tleft: startingPosition.x,\n\t\t\t\t\twidth: startingPosition.width,\n\t\t\t\t\theight: startingPosition.height,\n\t\t\t\t\tnode: target\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\n\t\t\tconst deltaX = Math.abs(target.offsetLeft - e.clientX);\n\t\t\tconst deltaY = Math.abs(target.offsetTop - e.clientY);\n\n\t\t\tconst onDrag = (e) => {\n\t\t\t\tif (this.props.dragging) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\t\tconst boxWidth = this.props.position.width;\n\t\t\t\t\tconst boxHeight = this.props.position.height;\n\t\t\t\t\tconst left = e.clientX - deltaX;\n\t\t\t\t\tconst top = e.clientY - deltaY;\n\n\t\t\t\t\tconst currentPosition = calculateBoundariesForDrag(left, top, boxWidth, boxHeight, boundingBoxDimensions);\n\t\t\t\t\tdata = {\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\twidth: this.props.position.width,\n\t\t\t\t\t\theight: this.props.position.height,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onDragEnd = (e) => {\n\t\t\t\tif (this.props.dragging) {\n\t\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onDrag);\n\t\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t\t}\n\t}\n\n\tshortcutHandler(e) {\n\t\tconst { position } = this.props;\n\n\t\tif (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left + 1,\n\t\t\t\tx: position.x + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left + 10,\n\t\t\t\tx: position.x + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left - 1,\n\t\t\t\tx: position.x - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\tleft: position.left - 10,\n\t\t\t\tx: position.x - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top - 1,\n\t\t\t\ty: position.y - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top - 10,\n\t\t\t\ty: position.y - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top + 1,\n\t\t\t\ty: position.y + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\ttop: position.top + 10,\n\t\t\t\ty: position.y + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\twidth: position.width - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height + 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height + 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height - 1\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tconst data = Object.assign({}, position, {\n\t\t\t\tnode: this.box.current,\n\t\t\t\theight: position.height - 10\n\t\t\t});\n\t\t\tthis.props.onKeyUp && this.props.onKeyUp(e, data);\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tif (this.props.position.resize || this.props.position.resize === undefined) { // Allow resize only if resize property for the box is true or undefined\n\t\t\te.stopPropagation();\n\t\t\tconst { target, clientX: startX, clientY: startY } = e;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst { position } = this.props;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst startingDimensions = this.box.current.getBoundingClientRect().toJSON();\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst { left, top, width, height } = startingDimensions;\n\t\t\tconst { cx, cy } = topLeftToCenter({ left, top, width, height, rotateAngle });\n\t\t\tconst rect = { width, height, cx, cy, rotateAngle };\n\t\t\tlet data = {\n\t\t\t\twidth: startingDimensions.width,\n\t\t\t\theight: startingDimensions.height,\n\t\t\t\tx: startingDimensions.left - boundingBoxPosition.x,\n\t\t\t\ty: startingDimensions.top - boundingBoxPosition.y,\n\t\t\t\tleft: startingDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: startingDimensions.top - boundingBoxPosition.y,\n\t\t\t\tnode: this.box.current\n\t\t\t};\n\t\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\n\t\t\tconst onResize = (e) => {\n\t\t\t\tif (this.props.resizing) {\n\t\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\t\tconst deltaX = clientX - startX;\n\t\t\t\t\tconst deltaY = clientY - startY;\n\t\t\t\t\tconst alpha = Math.atan2(deltaY, deltaX);\n\t\t\t\t\tconst deltaL = getLength(deltaX, deltaY);\n\n\t\t\t\t\t// const { minWidth, minHeight } = this.props;\n\t\t\t\t\tconst beta = alpha - degToRadian(rotateAngle);\n\t\t\t\t\tconst deltaW = deltaL * Math.cos(beta);\n\t\t\t\t\tconst deltaH = deltaL * Math.sin(beta);\n\t\t\t\t\t// TODO: Account for ratio when there are more points for resizing and when adding extras like constant aspect ratio resizing, shift + resize etc.\n\t\t\t\t\t// const ratio = rect.width / rect.height;\n\t\t\t\t\tconst type = target.id.replace('resize-', '');\n\n\t\t\t\t\tconst { position: { cx, cy }, size: { width, height } } = getNewStyle(type, rect, deltaW, deltaH, 10, 10); // Use a better way to set minWidth and minHeight\n\t\t\t\t\tconst currentPosition = centerToTopLeft({ cx, cy, width, height, rotateAngle });\n\n\t\t\t\t\tdata = {\n\t\t\t\t\t\twidth: currentPosition.width,\n\t\t\t\t\t\theight: currentPosition.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBoxPosition.x,\n\t\t\t\t\t\ty: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBoxPosition.x,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onResizeEnd = (e) => {\n\t\t\t\tif (this.props.resizing) {\n\t\t\t\t\tdocument.removeEventListener('mousemove', onResize);\n\t\t\t\t\tdocument.removeEventListener('mouseup', onResizeEnd);\n\n\t\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onResize);\n\t\t\tdocument.addEventListener('mouseup', onResizeEnd);\n\t\t}\n\t}\n\n\tonRotateStart(e) {\n\t\tif (this.props.position.rotate || this.props.position.rotate === undefined) {\n\t\t\te.stopPropagation();\n\t\t\tconst target = this.box.current;\n\t\t\tconst { clientX, clientY } = e;\n\t\t\tconst { rotateAngle } = this.props.position;\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst start = target.getBoundingClientRect().toJSON();\n\t\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst center = {\n\t\t\t\tx: start.left + start.width / 2,\n\t\t\t\ty: start.top + start.height / 2\n\t\t\t};\n\t\t\tconst startVector = {\n\t\t\t\tx: clientX - center.x,\n\t\t\t\ty: clientY - center.y\n\t\t\t};\n\n\t\t\tconst startAngle = rotateAngle ? rotateAngle : 0;\n\t\t\tlet angle = startAngle ? startAngle : 0;\n\t\t\tlet data = {\n\t\t\t\tx: start.x - boundingBoxPosition.x,\n\t\t\t\ty: start.y - boundingBoxPosition.y,\n\t\t\t\ttop: start.top - boundingBoxPosition.top,\n\t\t\t\tleft: start.left - boundingBoxPosition.left,\n\t\t\t\twidth: start.width,\n\t\t\t\theight: start.height,\n\t\t\t\trotateAngle: angle,\n\t\t\t\tnode: target\n\t\t\t};\n\n\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\tthis.props.onRotateStart && this.props.onRotateStart(e, newCoordinates);\n\n\t\t\tconst onRotate = (e) => {\n\t\t\t\tif (this.props.rotating) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst { clientX, clientY } = e;\n\t\t\t\t\tconst rotateVector = {\n\t\t\t\t\t\tx: clientX - center.x,\n\t\t\t\t\t\ty: clientY - center.y\n\t\t\t\t\t};\n\t\t\t\t\tangle = getAngle(startVector, rotateVector);\n\t\t\t\t\t// Snap box during rotation at certain angles - 0, 90, 180, 270, 360\n\t\t\t\t\tlet rotateAngle = Math.round(startAngle + angle)\n\t\t\t\t\tif (rotateAngle >= 360) {\n\t\t\t\t\t\trotateAngle -= 360\n\t\t\t\t\t} else if (rotateAngle < 0) {\n\t\t\t\t\t\trotateAngle += 360\n\t\t\t\t\t}\n\t\t\t\t\tif (rotateAngle > 356 || rotateAngle < 4) {\n\t\t\t\t\t\trotateAngle = 0\n\t\t\t\t\t} else if (rotateAngle > 86 && rotateAngle < 94) {\n\t\t\t\t\t\trotateAngle = 90\n\t\t\t\t\t} else if (rotateAngle > 176 && rotateAngle < 184) {\n\t\t\t\t\t\trotateAngle = 180\n\t\t\t\t\t} else if (rotateAngle > 266 && rotateAngle < 274) {\n\t\t\t\t\t\trotateAngle = 270\n\t\t\t\t\t}\n\t\t\t\t\tdata = Object.assign({}, data, {\n\t\t\t\t\t\trotateAngle\n\t\t\t\t\t});\n\n\t\t\t\t\tconst newCoordinates = getNewCoordinates(data);\n\t\t\t\t\tthis.props.onRotate && this.props.onRotate(e, newCoordinates);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onRotateEnd = (e) => {\n\t\t\t\tif (this.props.rotating) {\n\t\t\t\t\tdocument.removeEventListener('mousemove', onRotate);\n\t\t\t\t\tdocument.removeEventListener('mouseup', onRotateEnd);\n\t\t\t\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdocument.addEventListener('mousemove', onRotate);\n\t\t\tdocument.addEventListener('mouseup', onRotateEnd);\n\t\t}\n\t}\n\n\tgetCoordinatesWrapperWidth() {\n\t\tif (this.props.isSelected && this.coordinates && this.coordinates.current) {\n\t\t\treturn this.coordinates.current.offsetWidth;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { boxStyle, id, isSelected, position, resolution } = this.props;\n\t\tif (!isNaN(position.top) && !isNaN(position.left) && !isNaN(position.width) && !isNaN(position.height)) {\n\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect();\n\t\t\tlet xFactor = 1;\n\t\t\tlet yFactor = 1;\n\n\t\t\tif (resolution && resolution.width && resolution.height) {\n\t\t\t\txFactor = resolution.width / boundingBoxDimensions.width;\n\t\t\t\tyFactor = resolution.height / boundingBoxDimensions.height;\n\t\t\t}\n\n\t\t\tconst boxClassNames = isSelected ? `${styles.box} ${styles.selected}` : styles.box;\n\t\t\tconst rotateAngle = position.rotateAngle ? position.rotateAngle : 0;\n\t\t\tconst boxStyles = {\n\t\t\t\t...boxStyle,\n\t\t\t\twidth: `${position.width}px`,\n\t\t\t\theight: `${position.height}px`,\n\t\t\t\ttop: `${position.top}px`,\n\t\t\t\tleft: `${position.left}px`,\n\t\t\t\tzIndex: position.zIndex,\n\t\t\t\ttransform: `rotate(${rotateAngle}deg)`\n\t\t\t};\n\n\t\t\tif (isSelected && (this.props.dragging || this.props.resizing)) {\n\t\t\t\tboxStyles.zIndex = 99;\n\t\t\t}\n\n\t\t\treturn <div\n\t\t\t\tclassName={boxClassNames}\n\t\t\t\tid={id}\n\t\t\t\tonMouseUp={this.selectBox}\n\t\t\t\tonMouseDown={this.props.drag ? this.onDragStart : null} // If this.props.drag is false, remove the mouseDown event handler for drag\n\t\t\t\tonKeyDown={this.shortcutHandler}\n\t\t\t\tref={this.box}\n\t\t\t\tstyle={boxStyles}\n\t\t\t\ttabIndex=\"0\"\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tisSelected ?\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tref={this.coordinates}\n\t\t\t\t\t\t\tclassName={styles.coordinates}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`(${Math.round(position.x * xFactor)}, ${Math.round(position.y * yFactor)})`}\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected ?\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={`${styles.dimensions} ${styles.width}`}\n\t\t\t\t\t\t\tstyle={{ width: `${position.width}px`, top: `${position.height + 10}px` }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{`${Math.round(position.width * xFactor)} x ${Math.round(position.height * yFactor)}`}\n\t\t\t\t\t\t</span> :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected ?\n\t\t\t\t\t\tRESIZE_HANDLES.map(handle => {\n\t\t\t\t\t\t\tconst className = `${styles.resizeHandle} ${styles[`resize-${handle}`]}`;\n\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tonMouseDown={this.props.resize ? this.onResizeStart : null} // If this.props.resize is false then remove the mouseDown event handler for resize\n\t\t\t\t\t\t\t\tid={`resize-${handle}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tisSelected ?\n\t\t\t\t\t\tROTATE_HANDLES.map(handle => {\n\t\t\t\t\t\t\tconst className = `${styles.rotateHandle} ${styles[`rotate-${handle}`]}`;\n\t\t\t\t\t\t\treturn <div\n\t\t\t\t\t\t\t\tkey={handle}\n\t\t\t\t\t\t\t\tclassName={className}\n\t\t\t\t\t\t\t\tonMouseDown={this.props.rotate ? this.onRotateStart : null} // If this.props.rotate is false then remove the mouseDown event handler for rotate\n\t\t\t\t\t\t\t\tid={`rotate-${handle}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}) :\n\t\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</div>;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nBox.propTypes = {\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\tresolution: PropTypes.object,\n\trotate: PropTypes.bool\n};\n\nexport default Box;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport { calculateGuidePositions, proximityListener } from './utils/helpers';\nimport styles from './styles.scss';\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '',\n\t\t\tboundingBox: null,\n\t\t\tboxes: {},\n\t\t\tdragging: false,\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tmatch: {},\n\t\t\tresizing: false,\n\t\t\trotating: false\n\t\t};\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.dragStartHandler = this.dragStartHandler.bind(this);\n\t\tthis.dragHandler = this.dragHandler.bind(this);\n\t\tthis.dragEndHandler = this.dragEndHandler.bind(this);\n\t\tthis.resizeStartHandler = this.resizeStartHandler.bind(this);\n\t\tthis.resizeHandler = this.resizeHandler.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.rotateStartHandler = this.rotateStartHandler.bind(this);\n\t\tthis.rotateHandler = this.rotateHandler.bind(this);\n\t\tthis.rotateEndHandler = this.rotateEndHandler.bind(this);\n\t\tthis.keyUpHandler = this.keyUpHandler.bind(this);\n\t}\n\n\t// TODO: Remove duplicated code in componentDidMount() and componentDidUpdate() methods\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState, nextContext) {\n\t\tconst { active } = this.state;\n\t\t// Set the dimensions of the bounding box and the draggable boxes\n\t\t// when the component receives new boxes and/or style props.\n\t\t// This is to allow dynamically updating the component by changing the number of boxes,\n\t\t// updating existing boxes by external methods or updating the size of the bounding box\n\t\tif (nextProps.boxes !== this.props.boxes || nextProps.style !== this.props.style) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tnextProps.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\n\t\tif (active && nextProps.boxes[active] !== this.props.boxes[active]) {\n\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[active]: Object.assign({}, this.state.boxes[active], {\n\t\t\t\t\tx: nextProps.boxes[active].x,\n\t\t\t\t\ty: nextProps.boxes[active].y,\n\t\t\t\t\tleft: nextProps.boxes[active].left,\n\t\t\t\t\ttop: nextProps.boxes[active].top,\n\t\t\t\t\twidth: nextProps.boxes[active].width,\n\t\t\t\t\theight: nextProps.boxes[active].height\n\t\t\t\t})\n\t\t\t});\n\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t[active]: Object.assign({}, this.state.guides[active], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[active], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[active], 'y')\n\t\t\t\t})\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tselectBox(e) {\n\t\tconst boundingBox = this.getBoundingBoxElement();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tif (e.target.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tconst data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target,\n\t\t\t\tmetadata: this.state.boxes[e.target.id].metadata\n\t\t\t};\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.id\n\t\t\t});\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t} else if (e.target.parentNode.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tconst data = {\n\t\t\t\tx: boxDimensions.x - boundingBoxPosition.x,\n\t\t\t\ty: boxDimensions.y - boundingBoxPosition.y,\n\t\t\t\tleft: boxDimensions.left - boundingBoxPosition.x,\n\t\t\t\ttop: boxDimensions.top - boundingBoxPosition.y,\n\t\t\t\twidth: boxDimensions.width,\n\t\t\t\theight: boxDimensions.height,\n\t\t\t\tnode: e.target.parentNode,\n\t\t\t\tmetadata: this.state.boxes[e.target.parentNode.id].metadata\n\t\t\t};\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.parentNode.id\n\t\t\t});\n\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (e.target.id.indexOf('box') === -1 && e.target.parentNode.id.indexOf('box') === -1) {\n\t\t\tthis.setState({\n\t\t\t\tactive: ''\n\t\t\t});\n\t\t\tthis.props.onUnselect && this.props.onUnselect(e);\n\t\t}\n\t}\n\n\tdragStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tdragging: true\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onDragStart && this.props.onDragStart(e, newData);\n\t}\n\n\tdragHandler(e, data) {\n\t\tif (this.state.dragging) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onDrag && this.props.onDrag(e, newData);\n\t\t}\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\tfor (let axis in match) {\n\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\tif (axis === 'x') {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t})\n\t\t\t});\n\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tmatch\n\t\t\t});\n\t\t});\n\t}\n\n\tdragEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tdragging: false,\n\t\t\tguidesActive: false\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t});\n\t\tthis.props.onDragEnd && this.props.onDragEnd(e, newData);\n\t}\n\n\tresizeStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tresizing: true\n\t\t});\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, newData);\n\t}\n\n\tresizeHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onResize && this.props.onResize(e, newData);\n\t\t}\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t});\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tif (this.state.resizing) {\n\t\t\tconst newData = Object.assign({}, data, {\n\t\t\t\tmetadata: this.state.boxes[this.state.active].metadata\n\t\t\t});\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, newData);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trotateStartHandler(e, data) {\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\trotating: true\n\t\t});\n\t\tthis.props.onRotateStart && this.props.onRotateStart(e, data);\n\t}\n\n\trotateHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t...this.state.boxes[this.state.active],\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\trotateAngle: data.rotateAngle\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes\n\t\t});\n\n\t\tthis.props.onRotate && this.props.onRotate(e, data);\n\t}\n\n\trotateEndHandler(e, data) {\n\t\tthis.props.onRotateEnd && this.props.onRotateEnd(e, data);\n\t}\n\n\tkeyUpHandler(e, data) {\n\t\tconst newData = Object.assign({}, data, {\n\t\t\tmetadata: this.state.boxes[data.node.id].metadata\n\t\t});\n\t\tthis.props.onKeyUp && this.props.onKeyUp(e, newData);\n\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides,\n\t\t\tresizing: false,\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { active, boxes, guides } = this.state;\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = Object.keys(boxes).map((box, index) => {\n\t\t\tconst position = boxes[box];\n\t\t\tconst id = `box${index}`;\n\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdragging={this.state.dragging}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tisSelected={active === id}\n\t\t\t\tkey={id}\n\t\t\t\tonDragStart={this.dragStartHandler}\n\t\t\t\tonDrag={this.dragHandler}\n\t\t\t\tonDragEnd={this.dragEndHandler}\n\t\t\t\tonKeyUp={this.keyUpHandler}\n\t\t\t\tonResizeStart={this.resizeStartHandler}\n\t\t\t\tonResize={this.resizeHandler}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tonRotateStart={this.rotateStartHandler}\n\t\t\t\tonRotate={this.rotateHandler}\n\t\t\t\tonRotateEnd={this.rotateEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tresizing={this.state.resizing}\n\t\t\t\trotating={this.state.rotating}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tconst xAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\tconst xAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\tconst yAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\tconst yAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\treturn <div ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className}`} style={this.props.style}>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\n// Typechecking props for AlignmentGuides component\nAlignmentGuides.propTypes = {\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tonUnselect: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tresolution: PropTypes.object,\n\tstyle: PropTypes.object\n};\n\n// Default values for props\nAlignmentGuides.defaultProps = {\n\tboxes: [],\n\tdrag: true,\n\tresize: true,\n\trotate: true\n};\n\nexport default AlignmentGuides;","'use strict';\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["calculateGuidePositions","dimensions","axis","start","left","middle","parseInt","width","end","top","height","proximityListener","active","allGuides","xAxisGuidesForActiveBox","x","yAxisGuidesForActiveBox","y","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","map","box","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","Math","abs","value","activeBoxIndex","matchedBoxIndex","calculateBoundariesForDrag","bounds","boundingBox","getOffsetCoordinates","node","offsetLeft","offsetTop","offsetWidth","offsetHeight","getLength","sqrt","topLeftToCenter","rotateAngle","cx","cy","centerToTopLeft","setWidthAndDeltaW","deltaW","minWidth","expectedWidth","setHeightAndDeltaH","deltaH","minHeight","expectedHeight","getNewStyle","type","rect","widthFlag","heightFlag","widthAndDeltaW","heightAndDeltaH","cos","sin","position","size","getAngle","x1","y1","x2","y2","dot","det","angle","atan2","PI","getNewCoordinates","tempX","tempY","cosine","sine","rotatedX","rotatedY","degToRadian","deg","RESIZE_HANDLES","ROTATE_HANDLES","Box","props","React","createRef","coordinates","selectBox","bind","onDragStart","shortcutHandler","onResizeStart","onRotateStart","getCoordinatesWrapperWidth","e","isSelected","drag","target","id","indexOf","stopPropagation","current","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","data","deltaX","clientX","deltaY","clientY","onDrag","dragging","boundingBoxDimensions","boxWidth","boxHeight","currentPosition","onDragEnd","document","removeEventListener","addEventListener","shiftKey","ctrlKey","key","assign","onKeyUp","resize","startX","startY","startingDimensions","onResize","resizing","alpha","deltaL","beta","replace","onResizeEnd","rotate","center","startVector","startAngle","newCoordinates","onRotate","rotating","rotateVector","round","onRotateEnd","boxStyle","resolution","isNaN","xFactor","yFactor","boxClassNames","styles","selected","boxStyles","zIndex","transform","handle","className","resizeHandle","rotateHandle","PureComponent","propTypes","PropTypes","bool","func","string","keybindings","object","isRequired","AlignmentGuides","state","boxes","guidesActive","match","unSelectBox","dragStartHandler","dragHandler","dragEndHandler","resizeStartHandler","resizeHandler","resizeEndHandler","rotateStartHandler","rotateHandler","rotateEndHandler","keyUpHandler","forEach","setState","nextProps","nextState","nextContext","style","boxDimensions","metadata","onSelect","parentNode","onUnselect","newData","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","draggableBoxes","xAxisGuides","reduce","guideClassNames","guide","xAxis","xAxisGuidesForCurrentBox","concat","yAxisGuides","yAxis","yAxisGuidesForCurrentBox","Component","array","defaultProps"],"mappings":"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"}