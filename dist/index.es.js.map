{"version":3,"file":"index.es.js","sources":["../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/utils/helpers.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down'\n};\n\n// Positions for resize handles\nexport const RESIZE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { RESIZE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\n\nclass Box extends PureComponent {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.dragging = false;\n\t\tthis.resizing = false;\n\n\t\tthis.box = React.createRef();\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t}\n\n\tonDragStart(e) {\n\t\tconst target = this.box.current;\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tconst startingPosition = target.getBoundingClientRect().toJSON();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tconst data = {\n\t\t\tx: startingPosition.x - boundingBoxPosition.x,\n\t\t\ty: startingPosition.y - boundingBoxPosition.y,\n\t\t\ttop: startingPosition.y - boundingBoxPosition.y,\n\t\t\tleft: startingPosition.x - boundingBoxPosition.x,\n\t\t\twidth: startingPosition.width,\n\t\t\theight: startingPosition.height,\n\t\t\tnode: target\n\t\t};\n\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\t\tthis.dragging = true;\n\n\t\tconst deltaX = Math.abs(target.offsetLeft - e.clientX);\n\t\tconst deltaY = Math.abs(target.offsetTop - e.clientY);\n\n\t\tconst onDrag = (e) => {\n\t\t\tif (this.dragging) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\t\t\tconst boundingBoxDimensions = boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst boxWidth = this.box.current.offsetWidth;\n\t\t\t\tconst boxHeight = this.box.current.offsetHeight;\n\t\t\t\tconst left = e.clientX - deltaX;\n\t\t\t\tconst top = e.clientY - deltaY;\n\n\t\t\t\tif (left >= 0 && left <= boundingBoxDimensions.width - boxWidth && top >= 0 && top <= boundingBoxDimensions.height - boxHeight) {\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\tleft,\n\t\t\t\t\t\ttop\n\t\t\t\t\t};\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\twidth: this.box.current.offsetWidth,\n\t\t\t\t\t\theight: this.box.current.offsetHeight,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t} else if (left >= 0 && left <= boundingBoxDimensions.width - boxWidth) {\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\tleft,\n\t\t\t\t\t\ttop: top < 0 ? 0 : (boundingBoxDimensions.height - boxHeight)\n\t\t\t\t\t};\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\twidth: this.box.current.offsetWidth,\n\t\t\t\t\t\theight: this.box.current.offsetHeight,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t} else if (top >= 0 && top <= boundingBoxDimensions.height - boxHeight) {\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\tleft: left < 0 ? 0 : (boundingBoxDimensions.width - boxWidth),\n\t\t\t\t\t\ttop\n\t\t\t\t\t};\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\twidth: this.box.current.offsetWidth,\n\t\t\t\t\t\theight: this.box.current.offsetHeight,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t} else {\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\tleft: left < 0 ? 0 : (boundingBoxDimensions.width - boxWidth),\n\t\t\t\t\t\ttop: top < 0 ? 0 : (boundingBoxDimensions.height - boxHeight)\n\t\t\t\t\t};\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\tx: currentPosition.left,\n\t\t\t\t\t\ty: currentPosition.top,\n\t\t\t\t\t\ttop: currentPosition.top,\n\t\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\t\twidth: this.box.current.offsetWidth,\n\t\t\t\t\t\theight: this.box.current.offsetHeight,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onDragEnd = (e) => {\n\t\t\tif (this.dragging) {\n\t\t\t\tconst endPosition = {\n\t\t\t\t\tleft: e.clientX - deltaX,\n\t\t\t\t\ttop: e.clientY - deltaY\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\tx: endPosition.left,\n\t\t\t\t\ty: endPosition.top,\n\t\t\t\t\ttop: endPosition.top,\n\t\t\t\t\tleft: endPosition.left,\n\t\t\t\t\twidth: this.box.current.offsetWidth,\n\t\t\t\t\theight: this.box.current.offsetHeight,\n\t\t\t\t\tnode: this.box.current\n\t\t\t\t};\n\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t\tthis.dragging = false;\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onDrag);\n\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t}\n\n\tshortcutHandler(e) {\n\t\tif (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left + 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left + 10\n\t\t\t});\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left - 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left - 10\n\t\t\t});\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top - 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top - 10\n\t\t\t});\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top + 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top + 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width + 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width + 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width - 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width - 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height + 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height + 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height - 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height - 10\n\t\t\t});\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tconst { target } = e;\n\t\tconst boundingBox = this.props.getBoundingBoxElement();\n\t\tconst startingDimensions = this.box.current.getBoundingClientRect().toJSON();\n\t\tconst boundingBoxPosition = boundingBox.current.getBoundingClientRect().toJSON();\n\t\tconst data = {\n\t\t\twidth: startingDimensions.width,\n\t\t\theight: startingDimensions.height,\n\t\t\tx: startingDimensions.left - boundingBoxPosition.x,\n\t\t\ty: startingDimensions.top - boundingBoxPosition.y,\n\t\t\tnode: this.box.current\n\t\t};\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\t\tthis.resizing = true;\n\n\t\tconst onResize = (e) => {\n\t\t\tif (this.resizing) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tif (target.id === 'br') {\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: e.clientX - startingDimensions.left,\n\t\t\t\t\t\theight: e.clientY - startingDimensions.top\n\t\t\t\t\t};\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: startingDimensions.left - boundingBoxPosition.x,\n\t\t\t\t\t\ty: startingDimensions.top - boundingBoxPosition.y,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: data.y,\n\t\t\t\t\t\tleft: data.x\n\t\t\t\t\t});\n\t\t\t\t} else if (target.id === 'bl') {\n\t\t\t\t\tconst deltaX = startingDimensions.left - e.clientX;\n\t\t\t\t\tconst deltaY = startingDimensions.top + startingDimensions.height - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: startingDimensions.width + deltaX,\n\t\t\t\t\t\theight: startingDimensions.height - deltaY\n\t\t\t\t\t};\n\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top,\n\t\t\t\t\t\tleft: startingDimensions.left - deltaX\n\t\t\t\t\t};\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBoxPosition.x,\n\t\t\t\t\t\ty: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBoxPosition.x\n\t\t\t\t\t});\n\t\t\t\t} else if (target.id === 'tr') {\n\t\t\t\t\tconst deltaX = e.clientX - startingDimensions.left;\n\t\t\t\t\tconst deltaY = startingDimensions.top - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: deltaX,\n\t\t\t\t\t\theight: startingDimensions.height + deltaY\n\t\t\t\t\t};\n\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top - deltaY,\n\t\t\t\t\t\tleft: startingDimensions.left\n\t\t\t\t\t};\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBoxPosition.x,\n\t\t\t\t\t\ty: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBoxPosition.x\n\t\t\t\t\t});\n\t\t\t\t} else if (target.id === 'tl') {\n\t\t\t\t\tconst deltaX = startingDimensions.left - e.clientX;\n\t\t\t\t\tconst deltaY = startingDimensions.top - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: startingDimensions.width + deltaX,\n\t\t\t\t\t\theight: startingDimensions.height + deltaY\n\t\t\t\t\t};\n\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top - deltaY,\n\t\t\t\t\t\tleft: startingDimensions.left - deltaX\n\t\t\t\t\t};\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBoxPosition.x,\n\t\t\t\t\t\ty: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tnode: this.box.current\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBoxPosition.y,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBoxPosition.x\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = (e) => {\n\t\t\tif (this.resizing) {\n\t\t\t\tdocument.removeEventListener('mousemove', onResize);\n\t\t\t\tdocument.removeEventListener('mouseup', onResizeEnd);\n\n\t\t\t\tconst dimensions = this.box.current.getBoundingClientRect().toJSON();\n\t\t\t\tconst data = {\n\t\t\t\t\twidth: dimensions.width,\n\t\t\t\t\theight: dimensions.height,\n\t\t\t\t\ty: dimensions.top - boundingBoxPosition.y,\n\t\t\t\t\tx: dimensions.left - boundingBoxPosition.x,\n\t\t\t\t\tnode: this.box.current\n\t\t\t\t};\n\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\tthis.resizing = false;\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onResize);\n\t\tdocument.addEventListener('mouseup', onResizeEnd);\n\t}\n\n\trender() {\n\t\tconst { biggestBox, boxStyle, id, isSelected, position } = this.props;\n\t\tlet boxClassNames = isSelected ? `${styles.box} ${styles.selected}` : styles.box;\n\t\tboxClassNames = biggestBox === id ? `${boxClassNames} ${styles.biggest}` : boxClassNames;\n\t\tconst boxStyles = {\n\t\t\t...boxStyle,\n\t\t\twidth: `${position.width}px`,\n\t\t\theight: `${position.height}px`,\n\t\t\ttop: `${position.top}px`,\n\t\t\tleft: `${position.left}px`\n\t\t};\n\n\t\treturn <div\n\t\t\tclassName={boxClassNames}\n\t\t\tid={id}\n\t\t\tonMouseUp={this.props.selectBox}\n\t\t\tonMouseDown={this.onDragStart}\n\t\t\tonKeyUp={this.shortcutHandler}\n\t\t\tonKeyDown={this.shortcutHandler}\n\t\t\tref={this.box}\n\t\t\tstyle={boxStyles}\n\t\t\ttabIndex=\"0\"\n\t\t>\n\t\t\t{\n\t\t\t\tisSelected ?\n\t\t\t\t\tRESIZE_HANDLES.map(handle => {\n\t\t\t\t\t\tconst className = `${styles.resizeHandle} ${styles[`resize-${handle}`]}`;\n\t\t\t\t\t\treturn <div key={handle} className={className} onMouseDown={this.onResizeStart} id={handle} />\n\t\t\t\t\t}) :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t</div>;\n\t}\n}\n\nBox.propTypes = {\n\tbiggestBox: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tgetBoundingBoxElement: PropTypes.func,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tposition: PropTypes.object.isRequired,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool\n};\n\nexport default Box;","export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};\n\nexport const findBiggestBox = (boxes) => {\n\treturn Object.keys(boxes).reduce((prev, current) => {\n\t\tif (boxes[current].width > boxes[prev].width) {\n\t\t\treturn current;\n\t\t} else {\n\t\t\treturn prev\n\t\t}\n\t});\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport { calculateGuidePositions, findBiggestBox, proximityListener } from './utils/helpers';\nimport styles from './styles.scss';\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '',\n\t\t\tboundingBox: null,\n\t\t\tbiggestBox: '',\n\t\t\tboxes: {},\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tmatch: {}\n\t\t};\n\t\tthis.getBoundingBoxElement = this.getBoundingBoxElement.bind(this);\n\t\tthis.onDragHandler = this.onDragHandler.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.deactivateGuides = this.deactivateGuides.bind(this);\n\t}\n\n\t// TODO: Remove duplicated code in componentDidMount() and componentDidUpdate() methods\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tdocument.addEventListener('click', this.unSelectBox);\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tbiggestBox: findBiggestBox(boxes)\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState, nextContext) {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (nextProps.boxes !== this.props.boxes) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tnextProps.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tbiggestBox: findBiggestBox(boxes)\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.unSelectBox);\n\t}\n\n\tgetBoundingBoxElement() {\n\t\treturn this.boundingBox;\n\t}\n\n\tonDragHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y,\n\t\t\t\tleft: data.left,\n\t\t\t\ttop: data.top,\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\tx: calculateGuidePositions(boxes[data.node.id], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[data.node.id], 'y')\n\t\t\t})\n\t\t});\n\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tguidesActive: true,\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\tfor (let axis in match) {\n\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\tif (axis === 'x') {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t})\n\t\t\t});\n\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tmatch\n\t\t\t});\n\t\t});\n\t}\n\n\tselectBox(e) {\n\t\tif (e.target.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.getBoundingClientRect().toJSON();\n\t\t\tconst data = { x: boxDimensions.x, y: boxDimensions.y, width: boxDimensions.width, height: boxDimensions.height, node: e.target };\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.id\n\t\t\t}, () => {\n\t\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t\t});\n\t\t} else if (e.target.parentNode.id.indexOf('box') >= 0) {\n\t\t\tconst boxDimensions = e.target.parentNode.getBoundingClientRect().toJSON();\n\t\t\tconst data = { x: boxDimensions.x, y: boxDimensions.y, width: boxDimensions.width, height: boxDimensions.height, node: e.target.parentNode };\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.parentNode.id\n\t\t\t}, () => {\n\t\t\t\tthis.props.onSelect && this.props.onSelect(e, data);\n\t\t\t});\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (e.target.id.indexOf('box') === -1 && e.target.parentNode.id.indexOf('box') === -1) {\n\t\t\tthis.setState({\n\t\t\t\tactive: ''\n\t\t\t});\n\t\t}\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height,\n\t\t\t\ttop: data.y,\n\t\t\t\tleft: data.x,\n\t\t\t\tx: data.x,\n\t\t\t\ty: data.y\n\t\t\t})\n\t\t});\n\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t})\n\t\t});\n\t\tthis.setState({\n\t\t\tboxes,\n\t\t\tguides\n\t\t}, () => {\n\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t});\n\t}\n\n\tdeactivateGuides(e, data) {\n\t\tthis.setState({\n\t\t\tguidesActive: false\n\t\t}, () => {\n\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { active, boxes, guides } = this.state;\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = Object.keys(boxes).map((box, index) => {\n\t\t\tconst position = boxes[box];\n\t\t\tconst id = `box${index}`;\n\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tbiggestBox={this.state.biggestBox}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tgetBoundingBoxElement={this.getBoundingBoxElement}\n\t\t\t\tid={id}\n\t\t\t\tisSelected={active === id}\n\t\t\t\tkey={id}\n\t\t\t\tonDrag={this.onDragHandler}\n\t\t\t\tonDragEnd={this.deactivateGuides}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tconst xAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\tconst xAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\tconst yAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\tconst yAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\treturn <div ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className}`} style={this.props.style}>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\nAlignmentGuides.propTypes = {\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonSelect: PropTypes.func,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tstyle: PropTypes.object\n};\n\nexport default AlignmentGuides;","'use strict';\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["RESIZE_HANDLES","Box","props","dragging","resizing","box","React","createRef","onDragStart","bind","shortcutHandler","onResizeStart","e","target","current","boundingBox","getBoundingBoxElement","startingPosition","getBoundingClientRect","toJSON","boundingBoxPosition","data","x","y","top","left","width","height","node","deltaX","Math","abs","offsetLeft","clientX","deltaY","offsetTop","clientY","onDrag","stopImmediatePropagation","boundingBoxDimensions","boxWidth","offsetWidth","boxHeight","offsetHeight","currentPosition","onDragEnd","endPosition","document","removeEventListener","addEventListener","shiftKey","ctrlKey","key","setState","state","startingDimensions","onResize","id","currentDimensions","onResizeEnd","dimensions","biggestBox","boxStyle","isSelected","position","boxClassNames","styles","selected","biggest","boxStyles","selectBox","map","handle","className","resizeHandle","PureComponent","propTypes","PropTypes","string","drag","bool","func","keybindings","onRotateStart","onRotate","onRotateEnd","object","isRequired","resize","rotate","calculateGuidePositions","axis","start","middle","parseInt","end","proximityListener","active","allGuides","xAxisGuidesForActiveBox","yAxisGuidesForActiveBox","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","value","activeBoxIndex","matchedBoxIndex","findBiggestBox","boxes","reduce","prev","AlignmentGuides","guidesActive","match","onDragHandler","unSelectBox","resizeEndHandler","deactivateGuides","forEach","nextProps","nextState","nextContext","assign","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","indexOf","boxDimensions","onSelect","parentNode","draggableBoxes","xAxisGuides","guideClassNames","guide","xAxis","xAxisGuidesForCurrentBox","concat","yAxisGuides","yAxis","yAxisGuidesForCurrentBox","style","Component","array"],"mappings":"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"}