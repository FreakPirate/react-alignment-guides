{"version":3,"file":"index.es.js","sources":["../src/utils/constants.js","../node_modules/style-inject/dist/style-inject.es.js","../src/Box.js","../src/utils/helpers.js","../src/AlignmentGuides.js","../src/index.js"],"sourcesContent":["// Key map for changing the position and size of draggable boxes\n// Key map follows the Mousetrap syntax: https://craig.is/killing/mice\nexport const KEY_MAP = {\n\tMOVE_LEFT_1_PX: 'left',\n\tMOVE_RIGHT_1_PX: 'right',\n\tMOVE_UP_1_PX: 'up',\n\tMOVE_DOWN_1_PX: 'down',\n\tMOVE_LEFT_10_PX: 'shift+left',\n\tMOVE_RIGHT_10_PX: 'shift+right',\n\tMOVE_UP_10_PX: 'shift+up',\n\tMOVE_DOWN_10_PX: 'shift+down'\n};\n\n// Positions for resize handles\nexport const RESIZE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n\n// Positions for rotate handles\nexport const ROTATE_HANDLES = ['tr', 'tl', 'br', 'bl'];\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { RESIZE_HANDLES } from './utils/constants';\nimport styles from './styles.scss';\n\nclass Box extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\twidth: props.position ? props.position.width : props.defaultPosition.width,\n\t\t\theight: props.position ? props.position.height : props.defaultPosition.height,\n\t\t\ttop: props.position ? props.position.top : props.defaultPosition.top,\n\t\t\tleft: props.position ? props.position.left : props.defaultPosition.left\n\t\t};\n\n\t\tthis.dragging = false;\n\t\tthis.resizing = false;\n\n\t\tthis.box = React.createRef();\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.shortcutHandler = this.shortcutHandler.bind(this);\n\t\tthis.onResizeStart = this.onResizeStart.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { defaultPosition } = this.props;\n\t\tthis.setState({\n\t\t\twidth: defaultPosition.width,\n\t\t\theight: defaultPosition.height,\n\t\t\ttop: defaultPosition.top,\n\t\t\tleft: defaultPosition.left\n\t\t});\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState, nextContext) {\n\t\tif (this.props.position !== nextProps.position) {\n\t\t\tthis.setState({\n\t\t\t\twidth: nextProps.position.width,\n\t\t\t\theight: nextProps.position.height,\n\t\t\t\ttop: nextProps.position.top,\n\t\t\t\tleft: nextProps.position.left\n\t\t\t});\n\t\t}\n\t}\n\n\tonDragStart(e) {\n\t\tconst { target } = e;\n\t\tconst startingPosition = target.getBoundingClientRect().toJSON();\n\t\tconst data = { x: startingPosition.x, y: startingPosition.y, node: target };\n\t\tthis.props.onDragStart && this.props.onDragStart(e, data);\n\t\tthis.dragging = true;\n\n\t\tconst deltaX = Math.abs(target.offsetLeft - e.clientX);\n\t\tconst deltaY = Math.abs(target.offsetTop - e.clientY);\n\n\t\tconst onDrag = (e) => {\n\t\t\tif (this.dragging) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tconst currentPosition = {\n\t\t\t\t\tleft: e.clientX - deltaX,\n\t\t\t\t\ttop: e.clientY - deltaY\n\t\t\t\t};\n\t\t\t\tconst data = { x: currentPosition.left, y: currentPosition.top, node: target };\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: currentPosition.left,\n\t\t\t\t\ttop: currentPosition.top\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst onDragEnd = (e) => {\n\t\t\tif (this.dragging) {\n\t\t\t\tconst endPosition = {\n\t\t\t\t\tleft: e.clientX - deltaX,\n\t\t\t\t\ttop: e.clientY - deltaY\n\t\t\t\t};\n\t\t\t\tconst data = { x: endPosition.left, y: endPosition.top, node: target };\n\t\t\t\tthis.props.onDragEnd && this.props.onDragEnd(e, data);\n\t\t\t\tdocument.removeEventListener('mousemove', onDrag);\n\t\t\t\tdocument.removeEventListener('mouseup', onDragEnd);\n\t\t\t\tthis.dragging = false;\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onDrag);\n\t\tdocument.addEventListener('mouseup', onDragEnd);\n\t}\n\n\tshortcutHandler(e) {\n\t\tif (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left + 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left + 10\n\t\t\t});\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left - 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\tleft: this.state.left - 10\n\t\t\t});\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top - 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top - 10\n\t\t\t});\n\t\t} else if (!e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top + 1\n\t\t\t});\n\t\t} else if (e.shiftKey && !e.ctrlKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\ttop: this.state.top + 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width + 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowRight') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width + 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width - 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowLeft') {\n\t\t\tthis.setState({\n\t\t\t\twidth: this.state.width - 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height + 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowDown') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height + 10\n\t\t\t});\n\t\t} else if (e.ctrlKey && !e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height - 1\n\t\t\t});\n\t\t} else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowUp') {\n\t\t\tthis.setState({\n\t\t\t\theight: this.state.height - 10\n\t\t\t});\n\t\t}\n\t}\n\n\tonResizeStart(e) {\n\t\tconst { target } = e;\n\t\tconst { boundingBox } = this.props;\n\t\tconst startingDimensions = target.parentNode.getBoundingClientRect().toJSON();\n\t\tconst data = { width: startingDimensions.width, height: startingDimensions.height, x: startingDimensions.left, y: startingDimensions.top, node: target.parentNode };\n\t\tthis.props.onResizeStart && this.props.onResizeStart(e, data);\n\t\tthis.resizing = true;\n\n\t\tconst onResize = (e) => {\n\t\t\tif (this.resizing) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tif (target.id === 'br') {\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: e.clientX - startingDimensions.left,\n\t\t\t\t\t\theight: e.clientY - startingDimensions.top\n\t\t\t\t\t};\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: startingDimensions.left,\n\t\t\t\t\t\ty: startingDimensions.top,\n\t\t\t\t\t\tnode: target.parentNode\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height\n\t\t\t\t\t});\n\t\t\t\t} else if (target.id === 'bl') {\n\t\t\t\t\tconst deltaX = startingDimensions.left - e.clientX;\n\t\t\t\t\tconst deltaY = startingDimensions.top + startingDimensions.height - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: startingDimensions.width + deltaX,\n\t\t\t\t\t\theight: startingDimensions.height - deltaY\n\t\t\t\t\t};\n\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top,\n\t\t\t\t\t\tleft: startingDimensions.left - deltaX\n\t\t\t\t\t};\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBox.left,\n\t\t\t\t\t\ty: currentPosition.top - boundingBox.top,\n\t\t\t\t\t\tnode: target.parentNode\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBox.top,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBox.left\n\t\t\t\t\t});\n\t\t\t\t} else if (target.id === 'tr') {\n\t\t\t\t\tconst deltaX = e.clientX - startingDimensions.left;\n\t\t\t\t\tconst deltaY = startingDimensions.top - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: deltaX,\n\t\t\t\t\t\theight: startingDimensions.height + deltaY\n\t\t\t\t\t};\n\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top - deltaY,\n\t\t\t\t\t\tleft: startingDimensions.left\n\t\t\t\t\t};\n\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBox.left,\n\t\t\t\t\t\ty: currentPosition.top - boundingBox.top,\n\t\t\t\t\t\tnode: target.parentNode\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBox.top,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBox.left\n\t\t\t\t\t});\n\t\t\t\t} else if (target.id === 'tl') {\n\t\t\t\t\tconst deltaX = startingDimensions.left - e.clientX;\n\t\t\t\t\tconst deltaY = startingDimensions.top - e.clientY;\n\t\t\t\t\tconst currentDimensions = {\n\t\t\t\t\t\twidth: startingDimensions.width + deltaX,\n\t\t\t\t\t\theight: startingDimensions.height + deltaY\n\t\t\t\t\t};\n\n\t\t\t\t\tconst currentPosition = {\n\t\t\t\t\t\ttop: startingDimensions.top - deltaY,\n\t\t\t\t\t\tleft: startingDimensions.left - deltaX\n\t\t\t\t\t};\n\t\t\t\t\tconst data = {\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\tx: currentPosition.left - boundingBox.left,\n\t\t\t\t\t\ty: currentPosition.top - boundingBox.top,\n\t\t\t\t\t\tnode: target.parentNode\n\t\t\t\t\t};\n\t\t\t\t\tthis.props.onResize && this.props.onResize(e, data);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\twidth: currentDimensions.width,\n\t\t\t\t\t\theight: currentDimensions.height,\n\t\t\t\t\t\ttop: currentPosition.top - boundingBox.top,\n\t\t\t\t\t\tleft: currentPosition.left - boundingBox.left\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst onResizeEnd = (e) => {\n\t\t\tif (this.resizing) {\n\t\t\t\tdocument.removeEventListener('mousemove', onResize);\n\t\t\t\tdocument.removeEventListener('mouseup', onResizeEnd);\n\n\t\t\t\tconst parentNode = e.target.parentNode;\n\t\t\t\tconst dimensions = parentNode.getBoundingClientRect().toJSON();\n\t\t\t\tconst data = {\n\t\t\t\t\twidth: dimensions.width,\n\t\t\t\t\theight: dimensions.height,\n\t\t\t\t\tx: dimensions.top - boundingBox.top,\n\t\t\t\t\ty: dimensions.left - boundingBox.left,\n\t\t\t\t\tnode: parentNode\n\t\t\t\t};\n\t\t\t\tthis.props.onResizeEnd && this.props.onResizeEnd(e, data);\n\t\t\t\tthis.resizing = false;\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onResize);\n\t\tdocument.addEventListener('mouseup', onResizeEnd);\n\t}\n\n\trender() {\n\t\tconst { boxStyle, id, isSelected } = this.props;\n\t\tconst boxClassNames = isSelected ? `${styles.box} ${styles.selected}` : styles.box;\n\t\tconst boxStyles = {\n\t\t\t...boxStyle,\n\t\t\twidth: `${this.state.width}px`,\n\t\t\theight: `${this.state.height}px`,\n\t\t\ttop: `${this.state.top}px`,\n\t\t\tleft: `${this.state.left}px`\n\t\t};\n\n\t\treturn <div\n\t\t\tclassName={boxClassNames}\n\t\t\tid={id}\n\t\t\tonMouseUp={this.props.selectBox}\n\t\t\tonMouseDown={this.onDragStart}\n\t\t\tonKeyUp={this.shortcutHandler}\n\t\t\tonKeyDown={this.shortcutHandler}\n\t\t\tref={this.box}\n\t\t\tstyle={boxStyles}\n\t\t\ttabIndex=\"0\"\n\t\t>\n\t\t\t{\n\t\t\t\tisSelected ?\n\t\t\t\t\tRESIZE_HANDLES.map(handle => {\n\t\t\t\t\t\tconst className = `${styles.resizeHandle} ${styles[`resize-${handle}`]}`;\n\t\t\t\t\t\treturn <div key={handle} className={className} onMouseDown={this.onResizeStart} id={handle} />\n\t\t\t\t\t}) :\n\t\t\t\t\tnull\n\t\t\t}\n\t\t</div>;\n\t}\n}\n\nBox.propTypes = {\n\tdefaultPosition: PropTypes.object.isRequired,\n\tid: PropTypes.string,\n\tisSelected: PropTypes.bool,\n\tdrag: PropTypes.bool,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func\n};\n\nexport default Box;","export const calculateGuidePositions = (dimensions, axis) => {\n\tif (axis === 'x') {\n\t\tconst start = dimensions.left;\n\t\tconst middle = dimensions.left + parseInt(dimensions.width / 2, 10);\n\t\tconst end = dimensions.left + dimensions.width;\n\n\t\treturn [ start, middle, end ];\n\t} else {\n\t\tconst start = dimensions.top;\n\t\tconst middle = dimensions.top + parseInt(dimensions.height / 2, 10);\n\t\tconst end = dimensions.top + dimensions.height;\n\n\t\treturn [ start, middle, end ];\n\t}\n};\n\nexport const proximityListener = (active, allGuides) => {\n\tconst xAxisGuidesForActiveBox = allGuides[active].x;\n\tconst yAxisGuidesForActiveBox = allGuides[active].y;\n\n\tconst xAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, xAxisGuidesForActiveBox, 'x');\n\tconst yAxisAllGuides = getAllGuidesForGivenAxisExceptActiveBox(allGuides, yAxisGuidesForActiveBox, 'y');\n\tconst xAxisMatchedGuides = checkValueProximities(xAxisGuidesForActiveBox, xAxisAllGuides);\n\tconst yAxisMatchedGuides = checkValueProximities(yAxisGuidesForActiveBox, yAxisAllGuides);\n\n\tconst allMatchedGuides = {};\n\n\tif (xAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.x = {\n\t\t\t...xAxisMatchedGuides,\n\t\t\tactiveBoxGuides: xAxisGuidesForActiveBox\n\t\t};\n\t}\n\n\tif (yAxisMatchedGuides.proximity) {\n\t\tallMatchedGuides.y = {\n\t\t\t...yAxisMatchedGuides,\n\t\t\tactiveBoxGuides: yAxisGuidesForActiveBox,\n\t\t};\n\t}\n\n\treturn allMatchedGuides;\n};\n\nexport const getAllGuidesForGivenAxisExceptActiveBox = (allGuides, guidesForActiveBoxAlongGivenAxis, axis) => {\n\tconst result = Object.keys(allGuides).map(box => {\n\t\tconst currentBoxGuidesAlongGivenAxis = allGuides[box][axis];\n\t\tif (currentBoxGuidesAlongGivenAxis !== guidesForActiveBoxAlongGivenAxis) {\n\t\t\treturn currentBoxGuidesAlongGivenAxis;\n\t\t}\n\t});\n\n\treturn result.filter(guides => guides !== undefined);\n};\n\nexport const checkValueProximities = (activeBoxGuidesInOneAxis, allOtherGuidesInOneAxis) => {\n\tlet proximity = null;\n\tlet intersection = null;\n\tlet matchedArray = [];\n\tconst snapThreshold = 5;\n\tfor (let index = 0; index < allOtherGuidesInOneAxis.length; index += 1) {\n\t\tlet index2 = 0;\n\t\tlet index3 = 0;\n\n\t\twhile (index2 < activeBoxGuidesInOneAxis.length && index3 < allOtherGuidesInOneAxis[index].length) {\n\t\t\tconst diff = Math.abs(activeBoxGuidesInOneAxis[index2] - allOtherGuidesInOneAxis[index][index3]);\n\t\t\tif (diff <= snapThreshold) {\n\t\t\t\tproximity = { value: diff, activeBoxIndex: index2, matchedBoxIndex: index3 };\n\t\t\t\tmatchedArray = allOtherGuidesInOneAxis[index];\n\t\t\t\tintersection = allOtherGuidesInOneAxis[index][index3];\n\t\t\t}\n\n\t\t\tif (activeBoxGuidesInOneAxis[index2] < allOtherGuidesInOneAxis[index][index3]) {\n\t\t\t\tindex2 += 1;\n\t\t\t} else {\n\t\t\t\tindex3 += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { matchedArray, proximity, intersection };\n};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Box from './Box';\nimport { calculateGuidePositions, proximityListener } from './utils/helpers';\nimport styles from './styles.scss';\n\nclass AlignmentGuides extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.boundingBox = React.createRef();\n\t\tthis.state = {\n\t\t\tactive: '',\n\t\t\tboundingBox: null,\n\t\t\tboxes: {},\n\t\t\tguides: {},\n\t\t\tguidesActive: false,\n\t\t\tmatch: {}\n\t\t};\n\t\tthis.onDragHandler = this.onDragHandler.bind(this);\n\t\tthis.selectBox = this.selectBox.bind(this);\n\t\tthis.unSelectBox = this.unSelectBox.bind(this);\n\t\tthis.resizeEndHandler = this.resizeEndHandler.bind(this);\n\t\tthis.deactivateGuides = this.deactivateGuides.bind(this);\n\t}\n\n\t// TODO: Remove duplicated code in componentDidMount() and componentDidUpdate() methods\n\tcomponentDidMount() {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current && this.state.boundingBox === null) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentWillUpdate(nextProps, nextState, nextContext) {\n\t\t// Set the dimensions of the bounding box and the draggable boxes when the component mounts.\n\t\tif (this.boundingBox.current && this.state.boundingBox === null) {\n\t\t\tconst boundingBox = this.boundingBox.current.getBoundingClientRect().toJSON();\n\t\t\tconst boxes = {};\n\t\t\tconst guides = {};\n\n\t\t\t// Adding the guides for the bounding box to the guides object\n\t\t\tguides.boundingBox = {\n\t\t\t\tx: calculateGuidePositions(boundingBox, 'x').map(value => value - boundingBox.left),\n\t\t\t\ty: calculateGuidePositions(boundingBox, 'y').map(value => value - boundingBox.top)\n\t\t\t};\n\n\t\t\tthis.props.boxes.forEach((dimensions, index) => {\n\t\t\t\tboxes[`box${index}`] = dimensions;\n\t\t\t\tguides[`box${index}`] = {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\tboundingBox,\n\t\t\t\tboxes,\n\t\t\t\tguides\n\t\t\t});\n\t\t}\n\t}\n\n\tonDragHandler(e, data) {\n\t\tconst dimensions = Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\tleft: data.currentX,\n\t\t\ttop: data.currentY\n\t\t});\n\t\tthis.props.onDrag && this.props.onDrag(e, data);\n\t\tthis.setState({\n\t\t\tactive: data.node.id,\n\t\t\tguidesActive: true,\n\t\t\tboxes: Object.assign({}, this.state.boxes, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.boxes[data.node.id], {\n\t\t\t\t\tleft: data.currentX,\n\t\t\t\t\ttop: data.currentY\n\t\t\t\t})\n\t\t\t}),\n\t\t\tguides: Object.assign({}, this.state.guides, {\n\t\t\t\t[data.node.id]: Object.assign({}, this.state.guides[data.node.id], {\n\t\t\t\t\tx: calculateGuidePositions(dimensions, 'x'),\n\t\t\t\t\ty: calculateGuidePositions(dimensions, 'y')\n\t\t\t\t})\n\t\t\t})\n\t\t}, () => {\n\t\t\tconst match = proximityListener(this.state.active, this.state.guides);\n\t\t\tlet newActiveBoxLeft = this.state.boxes[this.state.active].left;\n\t\t\tlet newActiveBoxTop = this.state.boxes[this.state.active].top;\n\t\t\tfor (let axis in match) {\n\t\t\t\tconst { activeBoxGuides, matchedArray, proximity } = match[axis];\n\t\t\t\tconst activeBoxProximityIndex = proximity.activeBoxIndex;\n\t\t\t\tconst matchedBoxProximityIndex = proximity.matchedBoxIndex;\n\n\t\t\t\tif (axis === 'x') {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxLeft = this.state.boxes[this.state.active].left + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (activeBoxGuides[activeBoxProximityIndex] > matchedArray[matchedBoxProximityIndex]) {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top - proximity.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewActiveBoxTop = this.state.boxes[this.state.active].top + proximity.value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst boxes = Object.assign({}, this.state.boxes, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\tleft: newActiveBoxLeft,\n\t\t\t\t\ttop: newActiveBoxTop\n\t\t\t\t})\n\t\t\t});\n\t\t\tconst guides = Object.assign({}, this.state.guides, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.guides[this.state.active], {\n\t\t\t\t\tx: calculateGuidePositions(boxes[this.state.active], 'x'),\n\t\t\t\t\ty: calculateGuidePositions(boxes[this.state.active], 'y')\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.setState({\n\t\t\t\tboxes,\n\t\t\t\tguides,\n\t\t\t\tmatch\n\t\t\t});\n\t\t});\n\t}\n\n\tselectBox(e) {\n\t\tif (e.target.id.indexOf('box') >= 0) {\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.id\n\t\t\t});\n\t\t} else if (e.target.parentNode.id.indexOf('box') >= 0) {\n\t\t\tthis.setState({\n\t\t\t\tactive: e.target.parentNode.id\n\t\t\t});\n\t\t}\n\t}\n\n\tunSelectBox(e) {\n\t\tif (e.target.parentNode.id.indexOf('box') === -1) {\n\t\t\tthis.setState({\n\t\t\t\tactive: ''\n\t\t\t});\n\t\t}\n\t}\n\n\tresizeEndHandler(e, data) {\n\t\tthis.setState({\n\t\t\tboxes: Object.assign({}, this.state.boxes, {\n\t\t\t\t[this.state.active]: Object.assign({}, this.state.boxes[this.state.active], {\n\t\t\t\t\twidth: data.finalWidth,\n\t\t\t\t\theight: data.finalHeight,\n\t\t\t\t\ttop: data.finalTop,\n\t\t\t\t\tleft: data.finalLeft\n\t\t\t\t})\n\t\t\t})\n\t\t});\n\t}\n\n\tdeactivateGuides(e, data) {\n\t\tthis.setState({\n\t\t\tguidesActive: false\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { active, boxes, guides } = this.state;\n\n\t\t// Create the draggable boxes from the position data\n\t\tconst draggableBoxes = Object.keys(boxes).map((box, index) => {\n\t\t\tconst position = boxes[box];\n\t\t\tconst id = `box${index}`;\n\n\t\t\treturn <Box\n\t\t\t\t{...this.props}\n\t\t\t\tboundingBox={this.state.boundingBox}\n\t\t\t\tdefaultPosition={position}\n\t\t\t\tid={id}\n\t\t\t\tisSelected={active === id}\n\t\t\t\tkey={id}\n\t\t\t\tonDrag={this.onDragHandler}\n\t\t\t\tonDragEnd={this.deactivateGuides}\n\t\t\t\tonResizeEnd={this.resizeEndHandler}\n\t\t\t\tposition={position}\n\t\t\t\tselectBox={this.selectBox}\n\t\t\t/>;\n\t\t});\n\n\t\t// Create a guide(s) when the following conditions are met:\n\t\t// 1. A box aligns with another (top, center or bottom)\n\t\t// 2. An edge of a box touches any of the edges of another box\n\t\t// 3. A box aligns vertically or horizontally with the bounding box\n\t\t// TODO: Use a functional component to generate the guides for both axis instead of duplicating code.\n\t\tconst xAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.xAxis} ${styles.active}` : `${styles.guide} ${styles.xAxis}`;\n\t\t\tconst xAxisGuidesForCurrentBox = guides[box].x.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.x &&\n\t\t\t\t\tthis.state.match.x.intersection &&\n\t\t\t\t\tthis.state.match.x.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ left: position }} />;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(xAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\tconst yAxisGuides = Object.keys(guides).reduce((result, box) => {\n\t\t\tconst guideClassNames = this.state.guidesActive ? `${styles.guide} ${styles.yAxis} ${styles.active}` : `${styles.guide} ${styles.yAxis}`;\n\t\t\tconst yAxisGuidesForCurrentBox = guides[box].y.map((position, index) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.state.active &&\n\t\t\t\t\tthis.state.active === box &&\n\t\t\t\t\tthis.state.match &&\n\t\t\t\t\tthis.state.match.y &&\n\t\t\t\t\tthis.state.match.y.intersection &&\n\t\t\t\t\tthis.state.match.y.intersection === position\n\t\t\t\t) {\n\t\t\t\t\treturn <div key={`${position}-${index}`} className={guideClassNames} style={{ top: position }} />\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result.concat(yAxisGuidesForCurrentBox);\n\t\t}, []);\n\n\t\treturn <div ref={this.boundingBox} className={`${styles.boundingBox} ${this.props.className}`} style={this.props.style}>\n\t\t\t{draggableBoxes}\n\t\t\t{xAxisGuides}\n\t\t\t{yAxisGuides}\n\t\t</div>;\n\t}\n}\n\nAlignmentGuides.propTypes = {\n\tboxes: PropTypes.array.isRequired,\n\tboxStyle: PropTypes.object,\n\tclassName: PropTypes.string,\n\tdrag: PropTypes.bool,\n\tresize: PropTypes.bool,\n\trotate: PropTypes.bool,\n\tkeybindings: PropTypes.bool,\n\tonRotateStart: PropTypes.func,\n\tonRotate: PropTypes.func,\n\tonRotateEnd: PropTypes.func,\n\tonResizeStart: PropTypes.func,\n\tonResize: PropTypes.func,\n\tonResizeEnd: PropTypes.func,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragEnd: PropTypes.func,\n\tstyle: PropTypes.object\n};\n\nexport default AlignmentGuides;","'use strict';\n\n// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport AlignmentGuides from './AlignmentGuides';\n\nexport default AlignmentGuides;\n\n// ReactDOM.render(\n// \t<AlignmentGuides />,\n// \tdocument.getElementById('root')\n// );"],"names":["RESIZE_HANDLES","Box","props","state","width","position","defaultPosition","height","top","left","dragging","resizing","box","React","createRef","onDragStart","bind","shortcutHandler","onResizeStart","setState","nextProps","nextState","nextContext","e","target","startingPosition","getBoundingClientRect","toJSON","data","x","y","node","deltaX","Math","abs","offsetLeft","clientX","deltaY","offsetTop","clientY","onDrag","stopImmediatePropagation","currentPosition","onDragEnd","endPosition","document","removeEventListener","addEventListener","shiftKey","ctrlKey","key","boundingBox","startingDimensions","parentNode","onResize","id","currentDimensions","onResizeEnd","dimensions","boxStyle","isSelected","boxClassNames","styles","selected","boxStyles","selectBox","map","handle","className","resizeHandle","Component","propTypes","PropTypes","object","isRequired","string","bool","drag","resize","rotate","keybindings","onRotateStart","func","onRotate","onRotateEnd","calculateGuidePositions","axis","start","middle","parseInt","end","proximityListener","active","allGuides","xAxisGuidesForActiveBox","yAxisGuidesForActiveBox","xAxisAllGuides","getAllGuidesForGivenAxisExceptActiveBox","yAxisAllGuides","xAxisMatchedGuides","checkValueProximities","yAxisMatchedGuides","allMatchedGuides","proximity","activeBoxGuides","guidesForActiveBoxAlongGivenAxis","result","Object","keys","currentBoxGuidesAlongGivenAxis","filter","guides","undefined","activeBoxGuidesInOneAxis","allOtherGuidesInOneAxis","intersection","matchedArray","snapThreshold","index","length","index2","index3","diff","value","activeBoxIndex","matchedBoxIndex","AlignmentGuides","boxes","guidesActive","match","onDragHandler","unSelectBox","resizeEndHandler","deactivateGuides","current","forEach","assign","currentX","currentY","newActiveBoxLeft","newActiveBoxTop","activeBoxProximityIndex","matchedBoxProximityIndex","indexOf","finalWidth","finalHeight","finalTop","finalLeft","draggableBoxes","xAxisGuides","reduce","guideClassNames","guide","xAxis","xAxisGuidesForCurrentBox","concat","yAxisGuides","yAxis","yAxisGuidesForCurrentBox","style","array"],"mappings":"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"}